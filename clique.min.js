!function(){function t(t){var e,n,i,r="",o=-1;if(t&&t.length)for(i=t.length;(o+=1)<i;)e=t.charCodeAt(o),n=i>o+1?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),o+=1),127>=e?r+=String.fromCharCode(e):2047>=e?r+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return r}function e(t){var e,n,i,r,o,s,u=[];if(e=n=i=r=o=0,t&&t.length)for(s=t.length,t+="";s>e;)i=t.charCodeAt(e),n+=1,128>i?(u[n]=String.fromCharCode(i),e+=1):i>191&&224>i?(r=t.charCodeAt(e+1),u[n]=String.fromCharCode((31&i)<<6|63&r),e+=2):(r=t.charCodeAt(e+1),o=t.charCodeAt(e+2),u[n]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),e+=3);return u.join("")}function n(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function i(t,e){return t<<e|t>>>32-e}function r(t,e){for(var n,i=e?"0123456789ABCDEF":"0123456789abcdef",r="",o=0,s=t.length;s>o;o+=1)n=t.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function o(t){var e,n=32*t.length,i="";for(e=0;n>e;e+=8)i+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return i}function s(t){var e,n=32*t.length,i="";for(e=0;n>e;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function u(t){var e,n=8*t.length,i=Array(t.length>>2),r=i.length;for(e=0;r>e;e+=1)i[e]=0;for(e=0;n>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function h(t){var e,n=8*t.length,i=Array(t.length>>2),r=i.length;for(e=0;r>e;e+=1)i[e]=0;for(e=0;n>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return i}function a(t,e){var n,i,r,o,s,u,h,a,c=e.length,d=Array();for(u=Array(Math.ceil(t.length/2)),o=u.length,n=0;o>n;n+=1)u[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;u.length>0;){for(s=Array(),r=0,n=0;n<u.length;n+=1)r=(r<<16)+u[n],i=Math.floor(r/c),r-=i*c,(s.length>0||i>0)&&(s[s.length]=i);d[d.length]=r,u=s}for(h="",n=d.length-1;n>=0;n--)h+=e.charAt(d[n]);for(a=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=h.length;a>n;n+=1)h=e[0]+h;return h}function c(t,e){var n,i,r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",u=t.length;for(e=e||"=",n=0;u>n;n+=3)for(r=t.charCodeAt(n)<<16|(u>n+1?t.charCodeAt(n+1)<<8:0)|(u>n+2?t.charCodeAt(n+2):0),i=0;4>i;i+=1)s+=8*n+6*i>8*t.length?e:o.charAt(r>>>6*(3-i)&63);return s}var d;d={VERSION:"1.0.5",Base64:function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",r=!0;this.encode=function(e){var o,s,u,h="",a=e.length;for(i=i||"=",e=r?t(e):e,o=0;a>o;o+=3)for(u=e.charCodeAt(o)<<16|(a>o+1?e.charCodeAt(o+1)<<8:0)|(a>o+2?e.charCodeAt(o+2):0),s=0;4>s;s+=1)h+=8*o+6*s>8*a?i:n.charAt(u>>>6*(3-s)&63);return h},this.decode=function(t){var o,s,u,h,a,c,d,l,f,g,y="",w=[];if(!t)return t;o=g=0,t=t.replace(new RegExp("\\"+i,"gi"),"");do a=n.indexOf(t.charAt(o+=1)),c=n.indexOf(t.charAt(o+=1)),d=n.indexOf(t.charAt(o+=1)),l=n.indexOf(t.charAt(o+=1)),f=a<<18|c<<12|d<<6|l,s=f>>16&255,u=f>>8&255,h=255&f,g+=1,w[g]=64===d?String.fromCharCode(s):64===l?String.fromCharCode(s,u):String.fromCharCode(s,u,h);while(o<t.length);return y=w.join(""),y=r?e(y):y},this.setPad=function(t){return i=t||i,this},this.setTab=function(t){return n=t||n,this},this.setUTF8=function(t){return"boolean"==typeof t&&(r=t),this}},CRC32:function(e){var n,i,r,o=0,s=0,u=0;for(e=t(e),n=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o=-1^o,i=0,r=e.length;r>i;i+=1)u=255&(o^e.charCodeAt(i)),s="0x"+n.substr(9*u,8),o=o>>>8^s;return(-1^o)>>>0},MD5:function(e){function o(e){return e=m?t(e):e,s(d(u(e),8*e.length))}function h(e,n){var i,r,o,h,a;for(e=m?t(e):e,n=m?t(n):n,i=u(e),i.length>16&&(i=d(i,8*e.length)),r=Array(16),o=Array(16),a=0;16>a;a+=1)r[a]=909522486^i[a],o[a]=1549556828^i[a];return h=d(r.concat(u(n)),512+8*n.length),s(d(o.concat(h),640))}function d(t,e){var i,r,o,s,u,h=1732584193,a=-271733879,c=-1732584194,d=271733878;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,i=0;i<t.length;i+=16)r=h,o=a,s=c,u=d,h=f(h,a,c,d,t[i+0],7,-680876936),d=f(d,h,a,c,t[i+1],12,-389564586),c=f(c,d,h,a,t[i+2],17,606105819),a=f(a,c,d,h,t[i+3],22,-1044525330),h=f(h,a,c,d,t[i+4],7,-176418897),d=f(d,h,a,c,t[i+5],12,1200080426),c=f(c,d,h,a,t[i+6],17,-1473231341),a=f(a,c,d,h,t[i+7],22,-45705983),h=f(h,a,c,d,t[i+8],7,1770035416),d=f(d,h,a,c,t[i+9],12,-1958414417),c=f(c,d,h,a,t[i+10],17,-42063),a=f(a,c,d,h,t[i+11],22,-1990404162),h=f(h,a,c,d,t[i+12],7,1804603682),d=f(d,h,a,c,t[i+13],12,-40341101),c=f(c,d,h,a,t[i+14],17,-1502002290),a=f(a,c,d,h,t[i+15],22,1236535329),h=g(h,a,c,d,t[i+1],5,-165796510),d=g(d,h,a,c,t[i+6],9,-1069501632),c=g(c,d,h,a,t[i+11],14,643717713),a=g(a,c,d,h,t[i+0],20,-373897302),h=g(h,a,c,d,t[i+5],5,-701558691),d=g(d,h,a,c,t[i+10],9,38016083),c=g(c,d,h,a,t[i+15],14,-660478335),a=g(a,c,d,h,t[i+4],20,-405537848),h=g(h,a,c,d,t[i+9],5,568446438),d=g(d,h,a,c,t[i+14],9,-1019803690),c=g(c,d,h,a,t[i+3],14,-187363961),a=g(a,c,d,h,t[i+8],20,1163531501),h=g(h,a,c,d,t[i+13],5,-1444681467),d=g(d,h,a,c,t[i+2],9,-51403784),c=g(c,d,h,a,t[i+7],14,1735328473),a=g(a,c,d,h,t[i+12],20,-1926607734),h=y(h,a,c,d,t[i+5],4,-378558),d=y(d,h,a,c,t[i+8],11,-2022574463),c=y(c,d,h,a,t[i+11],16,1839030562),a=y(a,c,d,h,t[i+14],23,-35309556),h=y(h,a,c,d,t[i+1],4,-1530992060),d=y(d,h,a,c,t[i+4],11,1272893353),c=y(c,d,h,a,t[i+7],16,-155497632),a=y(a,c,d,h,t[i+10],23,-1094730640),h=y(h,a,c,d,t[i+13],4,681279174),d=y(d,h,a,c,t[i+0],11,-358537222),c=y(c,d,h,a,t[i+3],16,-722521979),a=y(a,c,d,h,t[i+6],23,76029189),h=y(h,a,c,d,t[i+9],4,-640364487),d=y(d,h,a,c,t[i+12],11,-421815835),c=y(c,d,h,a,t[i+15],16,530742520),a=y(a,c,d,h,t[i+2],23,-995338651),h=w(h,a,c,d,t[i+0],6,-198630844),d=w(d,h,a,c,t[i+7],10,1126891415),c=w(c,d,h,a,t[i+14],15,-1416354905),a=w(a,c,d,h,t[i+5],21,-57434055),h=w(h,a,c,d,t[i+12],6,1700485571),d=w(d,h,a,c,t[i+3],10,-1894986606),c=w(c,d,h,a,t[i+10],15,-1051523),a=w(a,c,d,h,t[i+1],21,-2054922799),h=w(h,a,c,d,t[i+8],6,1873313359),d=w(d,h,a,c,t[i+15],10,-30611744),c=w(c,d,h,a,t[i+6],15,-1560198380),a=w(a,c,d,h,t[i+13],21,1309151649),h=w(h,a,c,d,t[i+4],6,-145523070),d=w(d,h,a,c,t[i+11],10,-1120210379),c=w(c,d,h,a,t[i+2],15,718787259),a=w(a,c,d,h,t[i+9],21,-343485551),h=n(h,r),a=n(a,o),c=n(c,s),d=n(d,u);return Array(h,a,c,d)}function l(t,e,r,o,s,u){return n(i(n(n(e,t),n(o,u)),s),r)}function f(t,e,n,i,r,o,s){return l(e&n|~e&i,t,e,r,o,s)}function g(t,e,n,i,r,o,s){return l(e&i|n&~i,t,e,r,o,s)}function y(t,e,n,i,r,o,s){return l(e^n^i,t,e,r,o,s)}function w(t,e,n,i,r,o,s){return l(n^(e|~i),t,e,r,o,s)}var p=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,k=e&&"string"==typeof e.pad?e.pda:"=",m=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(t){return r(o(t,m),p)},this.b64=function(t){return c(o(t),k)},this.any=function(t,e){return a(o(t,m),e)},this.raw=function(t){return o(t,m)},this.hex_hmac=function(t,e){return r(h(t,e),p)},this.b64_hmac=function(t,e){return c(h(t,e),k)},this.any_hmac=function(t,e,n){return a(h(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(p=t),this},this.setPad=function(t){return k=t||k,this},this.setUTF8=function(t){return"boolean"==typeof t&&(m=t),this}},SHA1:function(e){function s(e){return e=w?t(e):e,o(d(h(e),8*e.length))}function u(e,n){var i,r,s,u,a;for(e=w?t(e):e,n=w?t(n):n,i=h(e),i.length>16&&(i=d(i,8*e.length)),r=Array(16),s=Array(16),u=0;16>u;u+=1)r[u]=909522486^i[u],s[u]=1549556828^i[u];return a=d(r.concat(h(n)),512+8*n.length),o(d(s.concat(a),672))}function d(t,e){var r,o,s,u,h,a,c,d,g=Array(80),y=1732584193,w=-271733879,p=-1732584194,k=271733878,m=-1009589776;for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,r=0;r<t.length;r+=16){for(u=y,h=w,a=p,c=k,d=m,o=0;80>o;o+=1)g[o]=16>o?t[r+o]:i(g[o-3]^g[o-8]^g[o-14]^g[o-16],1),s=n(n(i(y,5),l(o,w,p,k)),n(n(m,g[o]),f(o))),m=k,k=p,p=i(w,30),w=y,y=s;y=n(y,u),w=n(w,h),p=n(p,a),k=n(k,c),m=n(m,d)}return Array(y,w,p,k,m)}function l(t,e,n,i){return 20>t?e&n|~e&i:40>t?e^n^i:60>t?e&n|e&i|n&i:e^n^i}function f(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}var g=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,y=e&&"string"==typeof e.pad?e.pda:"=",w=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(t){return r(s(t,w),g)},this.b64=function(t){return c(s(t,w),y)},this.any=function(t,e){return a(s(t,w),e)},this.raw=function(t){return s(t,w)},this.hex_hmac=function(t,e){return r(u(t,e))},this.b64_hmac=function(t,e){return c(u(t,e),y)},this.any_hmac=function(t,e,n){return a(u(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(g=t),this},this.setPad=function(t){return y=t||y,this},this.setUTF8=function(t){return"boolean"==typeof t&&(w=t),this}},SHA256:function(e){function i(e,n){return e=n?t(e):e,o(k(h(e),8*e.length))}function s(e,n){e=A?t(e):e,n=A?t(n):n;var i,r=0,s=h(e),u=Array(16),a=Array(16);for(s.length>16&&(s=k(s,8*e.length));16>r;r+=1)u[r]=909522486^s[r],a[r]=1549556828^s[r];return i=k(u.concat(h(n)),512+8*n.length),o(k(a.concat(i),768))}function u(t,e){return t>>>e|t<<32-e}function d(t,e){return t>>>e}function l(t,e,n){return t&e^~t&n}function f(t,e,n){return t&e^t&n^e&n}function g(t){return u(t,2)^u(t,13)^u(t,22)}function y(t){return u(t,6)^u(t,11)^u(t,25)}function w(t){return u(t,7)^u(t,18)^d(t,3)}function p(t){return u(t,17)^u(t,19)^d(t,10)}function k(t,e){var i,r,o,s,u,h,a,c,d,k,B,D,A=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],b=new Array(64);for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,d=0;d<t.length;d+=16){for(i=A[0],r=A[1],o=A[2],s=A[3],u=A[4],h=A[5],a=A[6],c=A[7],k=0;64>k;k+=1)b[k]=16>k?t[k+d]:n(n(n(p(b[k-2]),b[k-7]),w(b[k-15])),b[k-16]),B=n(n(n(n(c,y(u)),l(u,h,a)),m[k]),b[k]),D=n(g(i),f(i,r,o)),c=a,a=h,h=u,u=n(s,B),s=o,o=r,r=i,i=n(B,D);A[0]=n(i,A[0]),A[1]=n(r,A[1]),A[2]=n(o,A[2]),A[3]=n(s,A[3]),A[4]=n(u,A[4]),A[5]=n(h,A[5]),A[6]=n(a,A[6]),A[7]=n(c,A[7])}return A}var m,B=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,D=e&&"string"==typeof e.pad?e.pda:"=",A=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(t){return r(i(t,A))},this.b64=function(t){return c(i(t,A),D)},this.any=function(t,e){return a(i(t,A),e)},this.raw=function(t){return i(t,A)},this.hex_hmac=function(t,e){return r(s(t,e))},this.b64_hmac=function(t,e){return c(s(t,e),D)},this.any_hmac=function(t,e,n){return a(s(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(B=t),this},this.setPad=function(t){return D=t||D,this},this.setUTF8=function(t){return"boolean"==typeof t&&(A=t),this},m=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){function n(e){return e=D?t(e):e,o(s(h(e),8*e.length))}function i(e,n){e=D?t(e):e,n=D?t(n):n;var i,r=0,u=h(e),a=Array(32),c=Array(32);for(u.length>32&&(u=s(u,8*e.length));32>r;r+=1)a[r]=909522486^u[r],c[r]=1549556828^u[r];return i=s(a.concat(h(n)),1024+8*n.length),o(s(c.concat(i),1536))}function s(t,e){var n,i,r,o=new Array(80),s=new Array(16),h=[new u(1779033703,-205731576),new u(-1150833019,-2067093701),new u(1013904242,-23791573),new u(-1521486534,1595750129),new u(1359893119,-1377402159),new u(-1694144372,725511199),new u(528734635,-79577749),new u(1541459225,327033209)],a=new u(0,0),c=new u(0,0),m=new u(0,0),B=new u(0,0),D=new u(0,0),A=new u(0,0),b=new u(0,0),C=new u(0,0),v=new u(0,0),x=new u(0,0),E=new u(0,0),F=new u(0,0),N=new u(0,0),L=new u(0,0),S=new u(0,0),T=new u(0,0),M=new u(0,0);for(void 0===k&&(k=[new u(1116352408,-685199838),new u(1899447441,602891725),new u(-1245643825,-330482897),new u(-373957723,-2121671748),new u(961987163,-213338824),new u(1508970993,-1241133031),new u(-1841331548,-1357295717),new u(-1424204075,-630357736),new u(-670586216,-1560083902),new u(310598401,1164996542),new u(607225278,1323610764),new u(1426881987,-704662302),new u(1925078388,-226784913),new u(-2132889090,991336113),new u(-1680079193,633803317),new u(-1046744716,-815192428),new u(-459576895,-1628353838),new u(-272742522,944711139),new u(264347078,-1953704523),new u(604807628,2007800933),new u(770255983,1495990901),new u(1249150122,1856431235),new u(1555081692,-1119749164),new u(1996064986,-2096016459),new u(-1740746414,-295247957),new u(-1473132947,766784016),new u(-1341970488,-1728372417),new u(-1084653625,-1091629340),new u(-958395405,1034457026),new u(-710438585,-1828018395),new u(113926993,-536640913),new u(338241895,168717936),new u(666307205,1188179964),new u(773529912,1546045734),new u(1294757372,1522805485),new u(1396182291,-1651133473),new u(1695183700,-1951439906),new u(1986661051,1014477480),new u(-2117940946,1206759142),new u(-1838011259,344077627),new u(-1564481375,1290863460),new u(-1474664885,-1136513023),new u(-1035236496,-789014639),new u(-949202525,106217008),new u(-778901479,-688958952),new u(-694614492,1432725776),new u(-200395387,1467031594),new u(275423344,851169720),new u(430227734,-1194143544),new u(506948616,1363258195),new u(659060556,-544281703),new u(883997877,-509917016),new u(958139571,-976659869),new u(1322822218,-482243893),new u(1537002063,2003034995),new u(1747873779,-692930397),new u(1955562222,1575990012),new u(2024104815,1125592928),new u(-2067236844,-1578062990),new u(-1933114872,442776044),new u(-1866530822,593698344),new u(-1538233109,-561857047),new u(-1090935817,-1295615723),new u(-965641998,-479046869),new u(-903397682,-366583396),new u(-779700025,566280711),new u(-354779690,-840897762),new u(-176337025,-294727304),new u(116418474,1914138554),new u(174292421,-1563912026),new u(289380356,-1090974290),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,-1676669620),new u(1288033470,-885112138),new u(1501505948,-60457430),new u(1607167915,987167468),new u(1816402316,1246189591)]),i=0;80>i;i+=1)o[i]=new u(0,0);for(t[e>>5]|=128<<24-(31&e),t[(e+128>>10<<5)+31]=e,r=t.length,i=0;r>i;i+=32){for(d(m,h[0]),d(B,h[1]),d(D,h[2]),d(A,h[3]),d(b,h[4]),d(C,h[5]),d(v,h[6]),d(x,h[7]),n=0;16>n;n+=1)o[n].h=t[i+2*n],o[n].l=t[i+2*n+1];for(n=16;80>n;n+=1)l(S,o[n-2],19),f(T,o[n-2],29),g(M,o[n-2],6),F.l=S.l^T.l^M.l,F.h=S.h^T.h^M.h,l(S,o[n-15],1),l(T,o[n-15],8),g(M,o[n-15],7),E.l=S.l^T.l^M.l,E.h=S.h^T.h^M.h,w(o[n],F,o[n-7],E,o[n-16]);for(n=0;80>n;n+=1)N.l=b.l&C.l^~b.l&v.l,N.h=b.h&C.h^~b.h&v.h,l(S,b,14),l(T,b,18),f(M,b,9),F.l=S.l^T.l^M.l,F.h=S.h^T.h^M.h,l(S,m,28),f(T,m,2),f(M,m,7),E.l=S.l^T.l^M.l,E.h=S.h^T.h^M.h,L.l=m.l&B.l^m.l&D.l^B.l&D.l,L.h=m.h&B.h^m.h&D.h^B.h&D.h,p(a,x,F,N,k[n],o[n]),y(c,E,L),d(x,v),d(v,C),d(C,b),y(b,A,a),d(A,D),d(D,B),d(B,m),y(m,a,c);y(h[0],h[0],m),y(h[1],h[1],B),y(h[2],h[2],D),y(h[3],h[3],A),y(h[4],h[4],b),y(h[5],h[5],C),y(h[6],h[6],v),y(h[7],h[7],x)}for(i=0;8>i;i+=1)s[2*i]=h[i].h,s[2*i+1]=h[i].l;return s}function u(t,e){this.h=t,this.l=e}function d(t,e){t.h=e.h,t.l=e.l}function l(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function f(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function g(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function y(t,e,n){var i=(65535&e.l)+(65535&n.l),r=(e.l>>>16)+(n.l>>>16)+(i>>>16),o=(65535&e.h)+(65535&n.h)+(r>>>16),s=(e.h>>>16)+(n.h>>>16)+(o>>>16);t.l=65535&i|r<<16,t.h=65535&o|s<<16}function w(t,e,n,i,r){var o=(65535&e.l)+(65535&n.l)+(65535&i.l)+(65535&r.l),s=(e.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o>>>16),u=(65535&e.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(s>>>16),h=(e.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(u>>>16);t.l=65535&o|s<<16,t.h=65535&u|h<<16}function p(t,e,n,i,r,o){var s=(65535&e.l)+(65535&n.l)+(65535&i.l)+(65535&r.l)+(65535&o.l),u=(e.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o.l>>>16)+(s>>>16),h=(65535&e.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(65535&o.h)+(u>>>16),a=(e.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(o.h>>>16)+(h>>>16);t.l=65535&s|u<<16,t.h=65535&h|a<<16}var k,m=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,B=e&&"string"==typeof e.pad?e.pda:"=",D=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(t){return r(n(t))},this.b64=function(t){return c(n(t),B)},this.any=function(t,e){return a(n(t),e)},this.raw=function(t){return n(t,D)},this.hex_hmac=function(t,e){return r(i(t,e))},this.b64_hmac=function(t,e){return c(i(t,e),B)},this.any_hmac=function(t,e,n){return a(i(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(m=t),this},this.setPad=function(t){return B=t||B,this},this.setUTF8=function(t){return"boolean"==typeof t&&(D=t),this}},RMD160:function(e){function o(e){return e=p?t(e):e,h(d(u(e),8*e.length))}function s(e,n){e=p?t(e):e,n=p?t(n):n;var i,r,o=u(e),s=Array(16),a=Array(16);for(o.length>16&&(o=d(o,8*e.length)),i=0;16>i;i+=1)s[i]=909522486^o[i],a[i]=1549556828^o[i];return r=d(s.concat(u(n)),512+8*n.length),h(d(a.concat(r),672))}function h(t){var e,n="",i=32*t.length;for(e=0;i>e;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function d(t,e){var r,o,s,u,h,a,c,d,y,w,p,A,b,C,v=1732584193,x=4023233417,E=2562383102,F=271733878,N=3285377520;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,u=t.length,s=0;u>s;s+=16){for(h=w=v,a=p=x,c=A=E,d=b=F,y=C=N,o=0;79>=o;o+=1)r=n(h,l(o,a,c,d)),r=n(r,t[s+k[o]]),r=n(r,f(o)),r=n(i(r,B[o]),y),h=y,y=d,d=i(c,10),c=a,a=r,r=n(w,l(79-o,p,A,b)),r=n(r,t[s+m[o]]),r=n(r,g(o)),r=n(i(r,D[o]),C),w=C,C=b,b=i(A,10),A=p,p=r;r=n(x,n(c,b)),x=n(E,n(d,C)),E=n(F,n(y,w)),F=n(N,n(h,p)),N=n(v,n(a,A)),v=r}return[v,x,E,F,N]}function l(t,e,n,i){return t>=0&&15>=t?e^n^i:t>=16&&31>=t?e&n|~e&i:t>=32&&47>=t?(e|~n)^i:t>=48&&63>=t?e&i|n&~i:t>=64&&79>=t?e^(n|~i):"rmd160_f: j out of range"}function f(t){return t>=0&&15>=t?0:t>=16&&31>=t?1518500249:t>=32&&47>=t?1859775393:t>=48&&63>=t?2400959708:t>=64&&79>=t?2840853838:"rmd160_K1: j out of range"}function g(t){return t>=0&&15>=t?1352829926:t>=16&&31>=t?1548603684:t>=32&&47>=t?1836072691:t>=48&&63>=t?2053994217:t>=64&&79>=t?0:"rmd160_K2: j out of range"}var y=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,w=e&&"string"==typeof e.pad?e.pda:"=",p=e&&"boolean"==typeof e.utf8?e.utf8:!0,k=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],B=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],D=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(t){return r(o(t,p))},this.b64=function(t){return c(o(t,p),w)},this.any=function(t,e){return a(o(t,p),e)},this.raw=function(t){return o(t,p)},this.hex_hmac=function(t,e){return r(s(t,e))},this.b64_hmac=function(t,e){return c(s(t,e),w)},this.any_hmac=function(t,e,n){return a(s(t,e),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(y=t),this},this.setPad=function(t){return"undefined"!=typeof t&&(w=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(p=t),this}}},function(t,e){var n=!1;"object"==typeof exports&&(n=exports,exports&&"object"==typeof global&&global&&global===global.global&&(t=global)),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):n?"object"==typeof module&&module&&module.exports===n?module.exports=d:n.Hashes=d:t.Hashes=d}(this)}(),function(){"use strict";var t,e;t=window.clique,e=window.clique={},e.noConflict=function(){var n=e;return e=t,n},e.model={},e.view={}}(),function(t,e,n,i){"use strict";t.adapter={},t.Adapter=function(n){var r;this.mutators=r={},this.onNewMutator=this.onNewMutator||e.noop,this.addMutator=function(n){var i;return e.has(r,n.key)||(r[n.key]=new t.util.Mutator(n),this.onNewMutator(i)),i=r[n.key]},this.getMutator=e.propertyOf(r),this.findNodes=function(t){return i.when(this.findNodesImpl(t)).then(e.partial(e.map,e,this.addMutator,this))},this.findNode=function(t){return i.when(this.findNodesImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addMutator(t[0])},this))},this.findNodeByKey=function(t){return this.findNode({key:t})},this.findLinks=function(n){var r=t.util.deepCopy(n),o=e.isUndefined(r.undirected)?!0:r.undirected,s=e.isUndefined(r.directed)?!0:r.directed,u=r.source,h=r.target;return delete r.undirected,delete r.directed,delete r.source,delete r.target,i.when(this.findLinksImpl(r,u,h,o,s)).then(e.partial(e.map,e,this.addMutator,this))},this.findLink=function(t){return i.when(this.findLinksImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addMutator(t[0])},this))},this.findLinkByKey=function(t){return this.findLink({key:t})},this.getNeighborLinks=function(t,n){var r=[];return n=n||{},e.each(["outgoing","incoming","undirected"],function(t){n[t]=e.isUndefined(n[t])?!0:n[t]}),n.outgoing&&r.push(this.findLinks({source:t.key(),undirected:!1})),n.incoming&&r.push(this.findLinks({target:t.key(),undirected:!1})),n.undirected&&(r.push(this.findLinks({source:t.key(),undirected:!0})),r.push(this.findLinks({target:t.key(),undirected:!0}))),i.when.apply(i,r).then(function(){return e.reduce(e.toArray(arguments),function(t,e){return t.concat(e)},[])})},this.getOutgoingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!1,undirected:!1})},this.getOutflowingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!1,undirected:!0})},this.getIncomingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!0,undirected:!1})},this.getInflowingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!0,undirected:!0})},this.getUndirectedLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!1,undirected:!0})},this.getDirectedLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!0,undirected:!1})},this.getNeighbors=function(t,n){var r=t.key();return this.getNeighborLinks(t,n).then(e.bind(function(t){var n,o;return n=e.map(t,function(t){return r===t.source()?t.target():t.source()}),o=e.map(n,this.getMutator,this),e.each(o,function(t,r){o[r]=e.isUndefined(t)?this.findNodeByKey(n[r]):i.when(o[r])},this),i.when.apply(i,o)},this)).then(function(){return e.toArray(arguments)})},this.getOutgoingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!1,undirected:!1})},this.getOutflowingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!1,undirected:!0})},this.getIncomingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!0,undirected:!1})},this.getInflowingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!0,undirected:!0})},this.getUndirectedNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!1,undirected:!0})},this.getDirectedNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!0,undirected:!1})},this.createNode=function(t){return i.when(this.createNodeImpl(t||{})).then(e.bind(this.addMutator,this))},this.createLink=function(t,n,r,o){var s;return t=e.result(t,"key",t),n=e.result(n,"key",n),s=r||{},o=e.isUndefined(o)?!1:o,i.when(this.createLinkImpl(t,n,s,o)).then(e.bind(this.addMutator,this))},this.destroyNode=function(t){var e=t.key();return this.destroyNodeImpl(e).then(function(t){return{key:e,response:t}})},this.destroyLink=function(t){var e=t.key();return this.destroyLinkImpl(e).then(function(t){return{key:e,response:t}})},n=n||{},this.initialize.apply(this,arguments)},t.Adapter.extend=n.Model.extend,t.adapter.NodeLinkList=t.Adapter.extend({initialize:function(n){var i={};this.nodes=t.util.deepCopy(n.nodes),this.links=t.util.deepCopy(n.links),e.each(this.nodes,function(t,n){for(var r,o="datax";e.has(t,o);)o+="x";r=t[o]={},e.each(t,function(e,n){n!==o&&(r[n]=e,delete t[n])}),"data"!==o&&(t.data=r,delete t[o]),i[n]=t,t.key=e.uniqueId("node_")}),e.each(this.links,function(t){t.key=e.uniqueId("link_"),t.source=i[t.source],t.target=i[t.target]},this)},findNodesImpl:function(n){var i,r=t.util.deepCopy(n),o=this.nodes;return r.key&&(o=e.filter(o,function(t){return t.key===r.key}),delete r.key),i=e.filter(o,function(t){return e.isMatch(t.data,r)})},findLinksImpl:function(t,n,i,r,o){return e.filter(this.links,function(s){var u=(s.undirected||!1)===r,h=(e.isUndefined(s.undirected)||!s.undirected)===o,a=e.isUndefined(n)||s.source.key===n,c=e.isUndefined(i)||s.target.key===i,d=e.isMatch(t,s.data);return e.every([a,c,d,u,h])})},newNode:e.noop,newLink:e.noop,destroyNode:e.noop,destroyLink:e.noop})}(window.clique,window._,window.Backbone,window.jQuery),function(t,e,n,i){"use strict";t.util={},t.util.md5=function(){var t=new e.MD5;return function(e){return t.hex(e)}}(),t.util.linkHash=function(t){var e,i;return e=t.source,n.isString(e)||(e=e.key),i=t.target,n.isString(i)||(i=i.key),JSON.stringify([e,i])},t.util.deepCopy=function(t){return n.isUndefined(t)?void 0:JSON.parse(JSON.stringify(t))},t.util.concat=function(){var t=n.toArray(arguments);return n.reduce(t,function(t,e){return t.concat(e)},[])},t.util.jqSequence=function(t){var e,r;return e=function(t,i,r){return r===n.size(t)?i:(i=i.then(function(){return t[r]}),e(t,i,r+1))},r=i.$.Deferred(),r.resolve(),e(t,r,0)},t.util.Set=function(){var t={};return{add:function(e){t[e]=null},remove:function(e){delete t[e]},has:function(e){return n.has(t,e)},items:function(e){var i=n.keys(t);return e&&(i=n.map(i,e)),i},size:function(){return n.size(t)}}},t.util.MultiTable=function(){var e={};return{add:function(i,r){n.has(e,i)||(e[i]=new t.util.Set),e[i].add(r)},remove:function(t,i){n.has(e,t)&&e[t].remove(i)},strike:function(t){delete e[t]},has:function(t,i){return n.has(e,t)&&(n.isUndefined(i)||e[t].has(i))},items:function(t){return n.has(e,t)?e[t].items():void 0}}},t.util.require=function(t,e){if(n.isUndefined(t))throw new Error("argument '"+e+"' is required")},t.util.Mutator=function(e){var r=new t.util.Set;return e.data=e.data||{},n.each(["key","source","target"],function(t){r.add(t)}),n.extend({key:function(){return e.key},source:function(){return e.source.key||e.source},target:function(){return e.target.key||e.target},getTransient:function(t){return r.has(t)?void 0:e[t]},setTransient:function(t,n){return r.has(t)?!1:(e[t]=n,!0)},clearTransient:function(t){return r.has(t)?!1:(delete e[t],!0)},getAllData:function(){return n.pairs(e.data)},getData:function(t){return e.data[t]},setData:function(t,n){e.data[t]=n,this.trigger("changed",this,t,n)},clearData:function(t){delete e.data[t],this.trigger("cleared",this,t)},getTarget:function(){return e}},i.Events)}}(window.clique,window.Hashes,window._,window.Backbone),function(t,e,n){"use strict";t.Graph=e.Model.extend({constructor:function(t){e.Model.call(this,{},t||{})},initialize:function(e,n){t.util.require(n.adapter,"adapter"),this.adapter=n.adapter,this.nodes={},this.links=new t.util.Set,this.forward=new t.util.MultiTable,this.back=new t.util.MultiTable,this.set({nodes:[],links:[]})},addNeighborhood:function(i){var r,o,s,u,h=e.$;return t.util.require(i.center,"center"),t.util.require(i.radius,"radius"),r=i.center,o=i.radius,u=n.bind(function(e){return h.when.apply(h,n.map(e,function(t){return this.adapter.getNeighbors(t)},this)).then(function(){return t.util.concat.apply(this,n.toArray(arguments))}).then(n.bind(function(t){return this.addNodes(t).then(function(){return t})},this))},this),s=h.when([r]),this.addNode(r),n.times(o,function(){s=s.then(u)}),s},addNode:function(t){n.has(this.nodes,t.key())||this.adapter.getNeighborLinks(t).then(n.bind(function(e){var i;this.nodes[t.key()]=t.getTarget(),e=n.filter(e,function(t){return n.has(this.nodes,t.source())&&n.has(this.nodes,t.target())},this),i=n.compact(n.map(e,function(t){var e=t.key();return this.links.has(e)?void 0:(this.links.add(e),this.forward.add(t.source(),t.target()),t.getTransient("undirected")&&this.back.add(t.target(),t.source()),t.getTarget().source=this.nodes[t.source()],t.getTarget().target=this.nodes[t.target()],t.getTarget())},this)),this.set({nodes:this.get("nodes").concat([t.getTarget()]),links:this.get("links").concat(i)})},this))},addNodes:function(e){var i=n.map(e,this.addNode,this);return t.util.jqSequence(i)},removeNode:function(t){this.removeNeighborhood({center:t,radius:0})},removeNeighborhood:function(e){var i,r,o,s,u,h,a;e=e||{},i=e.center,r=e.radius,t.util.require(i,"center"),t.util.require(r,"radius"),s=new t.util.Set,s.add(i.key()),o=new t.util.Set,o.add(i.key()),n.each(n.range(r),n.bind(function(){var e=new t.util.Set;n.each(o.items(),n.bind(function(t){var i=this.forward.items(t)||[],r=this.back.items(t)||[];

n.each(i.concat(r),function(t){e.add(t),s.add(t)})},this)),o=e},this)),u=new t.util.Set,n.each(s.items(),n.bind(function(t){u.add(t),delete this.nodes[t],n.each(this.forward[t],n.bind(function(e){this.back.remove(e,t)},this)),n.each(this.back[t],n.bind(function(e){this.forward.remove(e,t)},this)),this.forward.strike(t),this.back.strike(t)},this)),h=n.filter(this.get("nodes"),function(t){return!u.has(t.key)}),a=[],n.each(this.get("links"),n.bind(function(t){u.has(t.source.key)||u.has(t.target.key)?this.links.remove(t.key):a.push(t)},this)),this.set({nodes:h,links:a})},inNeighbors:function(t){return n.clone(this.back.items(t))},outNeighbors:function(t){return n.clone(this.forward.items(t))},neighbors:function(e){var i,r=this.inNeighbors(e),o=this.outNeighbors(e);return n.isUndefined(r)&&n.isUndefined(o)?void 0:(i=new t.util.Set,n.each((r||[]).concat(o||[]),i.add,i),i.items())},inDegree:function(t){var e=this.back.items(t);return e&&n.size(e)||-1},outDegree:function(t){var e=this.forward.items(t);return e&&n.size(e)||-1},degree:function(t){var e=this.inDegree(t),n=this.outDegree(t);return 0>e&&0>n?-1:(0>e?0:e)+(0>n?0:n)}})}(window.clique,window.Backbone,window._),function(t,e,n){"use strict";t.model.Selection=e.Model.extend({initialize:function(){this.focalPoint=0},add:function(t){this.set(t,t),this.size()&&this.trigger("focused",this.focused()),this.trigger("added",t)},remove:function(t){var e=this.focused()===t;this.unset(t),this.focalPoint>=this.size()?(this.focalPoint=Math.max(0,this.size()-1),this.trigger("focused",this.focused())):e&&this.focusLeft(),this.trigger("removed",t)},items:function(){return n.keys(this.attributes)},focusKey:function(t){var e=n.indexOf(this.items(),t);return-1===e?!1:(this.focus(e),!0)},focus:function(t){if(this.focalPoint=t,this.focalPoint<0)for(;this.focalPoint<0;)this.focalPoint+=this.size();else this.focalPoint>=this.size()&&(this.focalPoint=this.focalPoint%this.size());this.trigger("focused",this.focused())},focusLeft:function(){this.focus(this.focalPoint-1)},focusRight:function(){this.focus(this.focalPoint+1)},focused:function(){return this.items()[this.focalPoint]},size:function(){return n.size(this.attributes)}})}(window.clique,window.Backbone,window._),function(t,e,n,i,r){"use strict";var o;o=function(t){return this.selected.has(t.key)?"2px":"0px"},t.view.Cola=e.View.extend({initialize:function(e){var o,s,u;t.util.require(this.model,"model"),t.util.require(this.el,"el"),e=e||{},this.nodeEnter=n.bind(e.nodeEnter||function(t){var e;t.append("circle").classed("node",!0).attr("r",0).style("fill","limegreen").transition().duration(this.transitionTime).attr("r",n.bind(this.nodeRadius,this)),e=t.append("g"),e.append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",5).attr("ry",5).style("pointer-events","none").style("stroke-width","2px").style("stroke",n.bind(this.fill,this)).style("fill","lightgray"),e.append("text").text(this.label).datum(function(t){return t.textBBox=this.getBBox(),t}).attr("x",function(t){return-t.textBBox.width/2}).attr("y",function(t){return t.textBBox.height/4}).style("opacity",0).style("pointer-events","none").style("cursor","default")},this),this.nodeExit=n.bind(e.nodeExit||function(t){t.each(n.bind(function(t){this.selection.remove(t.key)},this)).transition().duration(this.transitionTime).attr("r",0).style("opacity",0).remove()},this),this.linkEnter=n.bind(e.linkEnter||function(t){var e;e=t.append("path").style("fill","lightslategray").style("opacity",0).style("stroke-width",1).style("stroke","lightslategray"),this.postLinkAdd(e),e.transition().duration(this.transitionTime).style("opacity",1),t.append("path").style("fill","none").classed("handle",!0).style("stroke-width",7).on("mouseenter",function(){i.select(this).classed("hovering",!0)}).on("mouseout",function(){i.select(this).classed("hovering",!1)}).on("click",n.bind(function(t){i.event.shiftKey?this.linkSelection.has(t.key)?this.linkSelection.remove(t.key):this.linkSelection.add(t.key):i.event.ctrlKey?(this.linkSelection.has(t.key)||this.linkSelection.add(t.key),this.linkSelection.focusKey(t.key)):(n.each(this.linkSelection.items(),function(t){this.linkSelection.remove(t)}),this.linkSelection.add(t.key))},this)),n.bind(function(){var t,e;t=function(t,e){var n,i,r=!1;return e>t?(n=t,i=e):(r=!0,n=e,i=t),{name:n+","+i,reverse:r}},this.count={},e=n.bind(function(e,i,r){var o,s=t(e,i),u=s.name;return o=r?"bidir":s.reverse?"back":"forward",n.has(this.count,u)||(this.count[u]={forward:0,back:0,bidir:0}),this.count[u][o]+=1,{name:u,tier:o,rank:this.count[u][o]-1}},this),this.links.datum(function(t){return t.linkRank=e(t.source.key,t.target.key,t.data&&t.data.bidir),t})},this)()},this),this.linkExit=n.bind(e.linkExit||function(t){t.transition().duration(this.transitionTime).style("stroke-width",0).style("opacity",0).remove()},this),this.onTick=n.bind(e.onTick||function(){this.links.selectAll("path").attr("d",n.bind(function(t){var e,n,i,r,o,s,u,h,a,c,d,l,f,g,y,w;return w=t.data||{},y=function(t,e){return t+","+e},n=this.count[t.linkRank.name].bidir,i=Number(n%2===0),r=this.count[t.linkRank.name].forward,o=this.count[t.linkRank.name].back,"bidir"===t.linkRank.tier?e=t.linkRank.rank+i:"forward"===t.linkRank.tier?e=n+i+2*t.linkRank.rank:"back"===t.linkRank.tier&&(e=n+1+i+2*t.linkRank.rank),s=.15*(e%2===0?-e/2:(e+1)/2),d=e%2===0?-1:1,"forward"===t.linkRank.tier&&(s=-1*s,d=-1*d),u=t.target.x-t.source.x,h=t.target.y-t.source.y,l={x:t.source.x+.5*u+s*h,y:t.source.y+.5*h+s*-u},a=1/Math.sqrt(u*u+h*h),c={x:d*h*a*5,y:d*-u*a*5},0===e?g=w.bidir?["M",y(t.source.x+.25*c.x,t.source.y+.25*c.y),"L",y(t.target.x+.25*c.x,t.target.y+.25*c.y),"L",y(t.target.x-.25*c.x,t.target.y-.25*c.y),"L",y(t.source.x-.25*c.x,t.source.y-.25*c.y)]:["M",y(t.source.x+.5*c.x,t.source.y+.5*c.y),"L",y(t.target.x,t.target.y),"L",y(t.source.x-.5*c.x,t.source.y-.5*c.y)]:w.bidir?(f={x:t.source.x+.5*u-s*h,y:t.source.y+.5*h-s*-u},g=["M",y(t.source.x+.5*c.x,t.source.y+.5*c.y),"Q",y(l.x,l.y),y(t.target.x+.5*c.x,t.target.y+.5*c.y),"L",y(t.target.x,t.target.y),"Q",y(l.x-.5*c.x,l.y-.5*c.y),y(t.source.x,t.source.y)]):g=["M",y(t.source.x+c.x,t.source.y+c.y),"Q",y(l.x,l.y),y(t.target.x,t.target.y),"Q",y(l.x,l.y),y(t.source.x,t.source.y)],g.join(" ")},this))},this),this.label=e.label||"",n.isFunction(this.label)||(this.label=n.constant(this.label)),this.mode="node",this.postLinkAdd=e.postLinkAdd||n.noop,this.baseNodeRadius=7.5,u=e.nodeRadius||function(t,e){return e},n.isFunction(u)||(u=n.constant(u)),this.nodeRadius=function(t){return u(t,this.baseNodeRadius)},this.transitionTime=e.transitionTime||500,this.focusColor=n.isUndefined(e.focusColor)?"pink":e.focusColor,this.rootColor=n.isUndefined(e.rootColor)?"gold":e.rootColor,s=e.fill||"blue",n.isFunction(s)||(s=n.constant(s)),this.fill=n.bind(function(t){var e;return this.model.adapter.getMutator(t.key).clearTransient("root"),t.key===this.focused&&(e=this.focusColor),e?e:s(t)},this),this.prefill=n.bind(function(t){var e;return t.key===this.focused?e=this.focusColor:t.root&&(e=this.rootColor),e?e:s(t)},this),this.cola=r.d3adaptor().linkDistance(e.linkDistance||100).size([this.$el.width(),this.$el.height()]).start(),this.selection=new t.model.Selection,this.linkSelection=new t.model.Selection,i.select(this.el).selectAll("*").remove(),o=i.select(this.el).append("g"),o.append("g").classed("links",!0),o.append("g").classed("nodes",!0),this.listenTo(this.model,"change",n.debounce(this.render,100)),this.listenTo(this.selection,"focused",function(t){this.focused=t,this.renderNodes()}),this.listenTo(this.linkSelection,"removed",function(t){i.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!1)}),this.listenTo(this.linkSelection,"added",function(t){i.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!0)}),this.listenTo(this.linkSelection,"focused",function(t){i.select(this.el).selectAll(".handle").classed("focused",!1).filter(function(e){return e.key===t}).classed("focused",!0)}),this.selected=new t.util.Set,this.listenTo(this.selection,"added",function(t){this.selected.add(t)}),this.listenTo(this.selection,"removed",function(t){this.selected.remove(t)})},showLabels:function(){var t=500;this.nodes.selectAll("circle.node").filter(this.label).transition().delay(function(t,e,n){return 10*n}).duration(t).attr("r",2),this.nodes.selectAll("rect").style("pointer-events",null).transition().delay(t).duration(t).attr("x",function(t){return-t.textBBox.width/2}).attr("y",function(t){return-t.textBBox.height/2}).attr("width",function(t){return t.textBBox.width}).attr("height",function(t){return t.textBBox.height}),this.nodes.selectAll("text").style("pointer-events",null).transition().delay(t+t/2).duration(t/2).style("opacity",1)},hideLabels:function(){var t,e=500;t=this.nodes.selectAll("g"),t.selectAll("rect").transition().delay(function(t,e,n){return 10*n}).duration(e).attr("x",0).attr("y",0).attr("width",0).attr("height",0),t.selectAll("text").style("pointer-events","none").transition().duration(e/2).style("opacity",0),this.nodes.selectAll("circle.node").transition().delay(e).duration(e).attr("r",n.bind(this.nodeRadius,this))},toggleLabels:function(){if("node"===this.mode)this.mode="label";else{if("label"!==this.mode)throw new Error("illegal state for mode: '"+this.mode+"'");this.mode="node"}this.renderLabels()},renderLabels:function(){"node"===this.mode?this.hideLabels():"label"===this.mode&&this.showLabels()},renderNodes:function(t){var e=this;t&&t.cancel&&this.nodes.interrupt(),this.nodes.selectAll("circle.node").style("fill",n.bind(this.prefill,this)).style("stroke","blue").style("stroke-width",n.bind(o,this)).filter(function(t){return t.root}).transition().delay(2*this.transitionTime).each("interrupt",function(){i.select(this).style("fill",n.bind(e.fill,e))}).duration(2*this.transitionTime).style("fill",n.bind(this.fill,this)),this.nodes.selectAll("rect").style("fill",n.bind(function(t){return t.key===this.focused?"pink":"lightgray"},this)).style("stroke",n.bind(function(t){return this.selected.has(t.key)?"blue":n.bind(this.fill,this,t)()},this)),this.renderLabels()},render:function(){var t,e,r=this.model.get("nodes"),o=this.model.get("links"),s=i.select(this.el),u=this;this.nodes=s.select("g.nodes").selectAll("g.node").data(r,n.property("key")),o=n.filter(this.model.get("links"),function(t){return!(t.data&&t.data.bidir&&n.has(t.data||{},"reference"))}),this.cola.nodes(r).links(o),this.nodes.datum(function(t){return t.fixed=!0,t}),this.links=s.select("g.links").selectAll("g.link").data(o,n.property("key")),t=this.links.enter().append("g").classed("link",!0),this.linkEnter(t),this.linkExit(this.links.exit()),t=this.nodes.enter().append("g").classed("node",!0),this.nodeEnter(t),e=this.cola.drag().on("drag",n.bind(function(){this.dragging=!0},this)),t.on("mousedown.signal",n.bind(function(){1===i.event.which&&(this.movingNode=!0)},this)).on("click",n.bind(function(t){1===i.event.which&&(this.dragging||(i.event.shiftKey?this.selected.has(t.key)?this.selection.remove(t.key):this.selection.add(t.key):i.event.ctrlKey?(this.selection.add(t.key),this.selection.focusKey(t.key)):(n.each(this.selection.items(),n.bind(function(t){this.selection.remove(t)},this)),this.selection.add(t.key)),this.renderNodes({cancel:!0})),this.dragging=!1)},this)).on("mouseup.signal",n.bind(function(){1===i.event.which&&(this.movingNode=!1)},this)).call(e),this.renderNodes(),this.nodeExit(this.nodes.exit()),this.cola.on("tick",n.bind(function(){this.nodes.attr("transform",function(t){return"translate("+t.x+" "+t.y+")"}),this.onTick()},this)),function(){var t,e,n=[1,0,0,1,0,0];t=function(t,e){n[4]+=t,n[5]+=e,s.select("g").attr("transform","matrix("+n.join(" ")+")")},e=function(t,e){n[0]*=t,n[3]*=t,n[4]*=t,n[5]*=t,n[4]+=(1-t)*e[0],n[5]+=(1-t)*e[1],s.select("g").attr("transform","matrix("+n.join(" ")+")")},function(){var e,n=!1;s.on("mousedown.pan",function(){3===i.event.which&&(n=!0)}),s.on("mousemove.pan",function(){n&&t(i.event.movementX,i.event.movementY)}),e=function(){n=!1},s.on("mouseup.pan",e),i.select(document).on("mouseup.pan",e)}(),s.on("wheel.zoom",function(){var t=1+Math.abs(i.event.deltaY)/200;i.event.deltaY>0&&(t=1/t),e(t,[i.event.pageX-u.$el.offset().left,i.event.pageY-u.$el.offset().top])}),i.select(document.body).on("wheel",function(){i.event.preventDefault(),i.event.stopPropagation()})}(),function(){var t,e,r,o,h=!1,a=!1,c={x:null,y:null},d={x:null,y:null},l=function(t,e,n){var i;return e>n&&(i=n,n=e,e=i),t>e&&n>t},f=function(t,e,n){return l(n.x,t.x,e.x)&&l(n.y,t.y,e.y)};s.on("mousedown.select",function(){1!==i.event.which||u.movingNode||(a=!0,h=!1,i.event.preventDefault(),i.selectAll(".panel-group").style("pointer-events","none"),i.event.shiftKey||(n.each(u.model.get("nodes"),n.bind(function(t){u.selection.remove(t.key)},this)),u.renderNodes(),n.each(u.model.get("links"),n.bind(function(t){u.linkSelection.remove(t.key)},this))),t=u.$el.offset(),c.x=d.x=i.event.pageX-t.left,c.y=d.y=i.event.pageY-t.top)}),s.on("mousemove.select",function(){var n,r;a&&(h||(h=!0,a&&(e=s.append("rect").classed("selector",!0).attr("x",c.x).attr("y",c.y).attr("width",0).attr("height",0).style("opacity",.1).style("fill","black"))),d.x=n=i.event.pageX-t.left,d.y=r=i.event.pageY-t.top),a&&(n>c.x?e.attr("width",n-c.x):e.attr("width",c.x-n).attr("x",n),r>c.y?e.attr("height",r-c.y):e.attr("height",c.y-r).attr("y",r))}),r=function(t,e){var n=1/t[0],i={x:-t[4]*n,y:-t[5]*n};return{x:n*e.x+i.x,y:n*e.y+i.y}},o=function(){var t;a&&(h&&(s.selectAll(".selector").remove(),e=null),i.selectAll(".panel-group").style("pointer-events","auto"),t=(s.select("g").attr("transform")||"matrix(1 0 0 1 0 0)").slice("matrix(".length,-1).split(" ").map(Number),c=r(t,c),d=r(t,d),n.each(u.model.get("nodes"),function(t){l(t.x,c.x,d.x)&&l(t.y,c.y,d.y)&&u.selection.add(t.key)}),n.each(u.model.get("links"),function(t){n.any([f(c,d,t.source),f(c,d,t.target)])&&u.linkSelection.add(t.key)}),u.renderNodes({cancel:!0})),h=!1,a=!1},s.on("mouseup.select",o),i.select(document).on("mouseup.select",o)}(),this.cola.start(),n.delay(n.bind(function(){this.nodes.datum(function(t){return t.fixed=!1,t}),this.trigger("render",this)},this),this.transitionTime+5)}})}(window.clique,window.Backbone,window._,window.d3,window.cola);