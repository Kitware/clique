!function(){"use strict";var t,e;t=window.clique,e=window.clique={},e.noConflict=function(){var n=e;return e=t,n},e.model={},e.view={}}(),function(t,e,n,i){"use strict";t.adapter={},t.Adapter=function(n){var o,s;s=e.bind(function(t,n){var o,s,r={nodes:{},links:{}};return o=e.bind(function(t){return i.when.apply(i,e.map(t,e.partial(this.neighbors,e,void 0),this)).then(function(){var t=e.toArray(arguments),n=[];return e.each(t,function(t){e.each(t.nodes,function(t){e.has(r.nodes,t.key())||n.push(t),r.nodes[t.key()]=t}),e.each(t.links,function(t){r.links[t.key()]=t})}),n})},this),r.nodes[t.key()]=t,s=i.when([t]),e.each(e.range(n),function(){s=s.then(o)}),s.then(e.bind(function(t){return i.when.apply(i,e.map(t,e.partial(this.neighborLinks,e,void 0),this)).then(function(){return e.each(e.toArray(arguments),function(t){e.each(t,function(t){e.has(r.links,t.key())||(r.links[t.key()]=t)})}),r.nodes=e.values(r.nodes),r.links=e.values(r.links),r})},this))},this),this.accessors=o={},this.onNewAccessor=this.onNewAccessor||e.noop,this.addAccessor=function(n){var i;return e.has(o,n.key)||(o[n.key]=new t.util.Accessor(n),this.onNewAccessor(i)),i=o[n.key]},this.getAccessor=e.propertyOf(o),this.findNodes=function(t){return i.when(this.findNodesImpl(t)).then(e.partial(e.map,e,this.addAccessor,this))},this.findNode=function(t){return i.when(this.findNodesImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addAccessor(t[0])},this))},this.findNodeByKey=function(t){return this.findNode({key:t})},this.findLinks=function(n){var o=t.util.deepCopy(n),s=o.directed,r=o.source,u=o.target;return delete o.directed,delete o.source,delete o.target,i.when(this.findLinksImpl(o,r,u,s)).then(e.partial(e.map,e,this.addAccessor,this))},this.findLink=function(t){return i.when(this.findLinksImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addAccessor(t[0])},this))},this.findLinkByKey=function(t){return this.findLink({key:t})},this.neighborLinkCount=function(t,n){return this.neighborLinkCountImpl?this.neighborLinkCountImpl(t,n):this.neighborLinks(t,n).then(e.size)},this.outgoingLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!0,incoming:!1,undirected:!1})},this.outflowingLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!0,incoming:!1,undirected:!0})},this.incomingLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!1,incoming:!0,undirected:!1})},this.inflowingLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!1,incoming:!0,undirected:!0})},this.undirectedLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!1,incoming:!1,undirected:!0})},this.directedLinkCount=function(t){return this.neighborLinkCount(t,{outgoing:!0,incoming:!0,undirected:!1})},this.neighborLinks=function(t,n){var o=[];return n=n||{},e.each(["outgoing","incoming","undirected"],function(t){n[t]=e.isUndefined(n[t])?!0:n[t]}),n.outgoing&&o.push(this.findLinks({source:t.key(),directed:!0})),n.incoming&&o.push(this.findLinks({target:t.key(),directed:!0})),n.undirected&&(o.push(this.findLinks({source:t.key(),directed:!1})),o.push(this.findLinks({target:t.key(),directed:!1}))),i.when.apply(i,o).then(function(){return e.reduce(e.toArray(arguments),function(t,e){return t.concat(e)},[])})},this.outgoingLinks=function(t){return this.neighborLinks(t,{outgoing:!0,incoming:!1,undirected:!1})},this.outflowingLinks=function(t){return this.neighborLinks(t,{outgoing:!0,incoming:!1,undirected:!0})},this.incomingLinks=function(t){return this.neighborLinks(t,{outgoing:!1,incoming:!0,undirected:!1})},this.inflowingLinks=function(t){return this.neighborLinks(t,{outgoing:!1,incoming:!0,undirected:!0})},this.undirectedLinks=function(t){return this.neighborLinks(t,{outgoing:!1,incoming:!1,undirected:!0})},this.directedLinks=function(t){return this.neighborLinks(t,{outgoing:!0,incoming:!0,undirected:!1})},this.neighborCount=function(t,n){return this.neighborCountImpl?this.neighborCountImpl(t,n):this.neighbors(t,n).then(function(t){return e.size(t.nodes)})},this.outgoingNeighborCount=function(t){return this.neighborCount(t,{outgoing:!0,incoming:!1,undirected:!1})},this.outflowingNeighborCount=function(t){return this.neighborCount(t,{outgoing:!0,incoming:!1,undirected:!0})},this.incomingNeighborCount=function(t){return this.neighborCount(t,{outgoing:!1,incoming:!0,undirected:!1})},this.inflowingNeighborCount=function(t){return this.neighborCount(t,{outgoing:!1,incoming:!0,undirected:!0})},this.undirectedNeighborCount=function(t){return this.neighborCount(t,{outgoing:!1,incoming:!1,undirected:!0})},this.directedNeighborCount=function(t){return this.neighborCount(t,{outgoing:!0,incoming:!0,undirected:!1})},this.neighbors=function(t,n){var o,s=t.key();return this.neighborLinks(t,n).then(e.bind(function(t){var n,r;return o=t,n=e.map(o,function(t){return s===t.source()?t.target():t.source()}),r=e.map(n,this.getAccessor,this),e.each(r,function(t,o){r[o]=e.isUndefined(t)?this.findNodeByKey(n[o]):i.when(r[o])},this),i.when.apply(i,r)},this)).then(function(){return{nodes:e.toArray(arguments),links:o}})},this.outgoingNeighbors=function(t){return this.neighbors(t,{outgoing:!0,incoming:!1,undirected:!1})},this.outflowingNeighbors=function(t){return this.neighbors(t,{outgoing:!0,incoming:!1,undirected:!0})},this.incomingNeighbors=function(t){return this.neighbors(t,{outgoing:!1,incoming:!0,undirected:!1})},this.inflowingNeighbors=function(t){return this.neighbors(t,{outgoing:!1,incoming:!0,undirected:!0})},this.undirectedNeighbors=function(t){return this.neighbors(t,{outgoing:!1,incoming:!1,undirected:!0})},this.directedNeighbors=function(t){return this.neighbors(t,{outgoing:!0,incoming:!0,undirected:!1})},this.neighborhood=function(t,n){return this.neighborhoodImpl?this.neighborhoodImpl.apply(this,arguments).then(e.bind(function(t){return{nodes:e.map(t.nodes,this.addAccessor,this),links:e.map(t.links,this.addAccessor,this)}},this)):s(t,n)},this.createNode=function(t){return i.when(this.createNodeImpl(t||{})).then(e.bind(this.addAccessor,this))},this.createLink=function(t,n,o,s){var r;return t=e.result(t,"key",t),n=e.result(n,"key",n),r=o||{},s=e.isUndefined(s)?!1:s,i.when(this.createLinkImpl(t,n,r,s)).then(e.bind(this.addAccessor,this))},this.destroyNode=function(t){var e=t.key();return this.destroyNodeImpl(e).then(function(t){return{key:e,response:t}})},this.destroyLink=function(t){var e=t.key();return this.destroyLinkImpl(e).then(function(t){return{key:e,response:t}})},n=n||{},this.initialize.apply(this,arguments)},t.Adapter.extend=n.Model.extend,t.adapter.NodeLinkList=t.Adapter.extend({initialize:function(n){var i={};this.nodes=t.util.deepCopy(n.nodes),this.links=t.util.deepCopy(n.links),e.each(this.nodes,function(t,n){for(var o,s="datax";e.has(t,s);)s+="x";o=t[s]={},e.each(t,function(e,n){n!==s&&(o[n]=e,delete t[n])}),"data"!==s&&(t.data=o,delete t[s]),i[n]=t,t.key=e.uniqueId("node_")}),e.each(this.links,function(t){t.key=e.uniqueId("link_"),t.source=i[t.source],t.target=i[t.target]},this)},findNodesImpl:function(n){var i,o=t.util.deepCopy(n),s=this.nodes;return o.key&&(s=e.filter(s,function(t){return t.key===o.key}),delete o.key),i=e.filter(s,function(t){return e.isMatch(t.data,o)})},findLinksImpl:function(t,n,i,o){return e.filter(this.links,function(s){var r,u=e.isUndefined(n)||s.source.key===n,c=e.isUndefined(i)||s.target.key===i,d=e.isMatch(t,s.data);return r=e.isUndefined(o)||e.isNull(o)?!0:o?!s.undirected:s.undirected,e.every([u,c,d,r])})},newNode:e.noop,newLink:e.noop,destroyNode:e.noop,destroyLink:e.noop})}(window.clique,window._,window.Backbone,window.jQuery),function(t,e,n,i){"use strict";t.util={},t.util.deepCopy=function(t){return n.isUndefined(t)?void 0:JSON.parse(JSON.stringify(t))},t.util.concat=function(){var t=n.toArray(arguments);return n.reduce(t,function(t,e){return t.concat(e)},[])},t.util.jqSequence=function(t){var e,o;return e=function(t,i,o){return o===n.size(t)?i:(i=i.then(function(){return t[o]}),e(t,i,o+1))},o=i.$.Deferred(),o.resolve(),e(t,o,0)},t.util.Set=function(){var t={};return{add:function(e){t[e]=null},remove:function(e){delete t[e]},has:function(e){return n.has(t,e)},items:function(e){var i=n.keys(t);return e&&(i=n.map(i,e)),i},size:function(){return n.size(t)}}},t.util.MultiTable=function(){var e={};return{add:function(i,o){n.has(e,i)||(e[i]=new t.util.Set),e[i].add(o)},remove:function(t,i){n.has(e,t)&&e[t].remove(i)},strike:function(t){delete e[t]},has:function(t,i){return n.has(e,t)&&(n.isUndefined(i)||e[t].has(i))},items:function(t){return n.has(e,t)?e[t].items():void 0}}},t.util.require=function(t,e){if(n.isUndefined(t))throw new Error("argument '"+e+"' is required")},t.util.Accessor=function(e){var o=new t.util.Set;return e.data=e.data||{},n.each(["key","source","target","data"],function(t){o.add(t)}),n.extend({key:function(){return e.key},source:function(){return e.source.key||e.source},target:function(){return e.target.key||e.target},getAttribute:function(t){return o.has(t)?void 0:e[t]},setAttribute:function(t,n){return o.has(t)?!1:(e[t]=n,!0)},clearAttribute:function(t){return o.has(t)?!1:(delete e[t],!0)},getAllAttributes:function(){var t={};return n.each(e,function(e,n){o.has(n)||(t[n]=e)}),t},getData:function(t){return e.data[t]},setData:function(t,n){e.data[t]=n,this.trigger("changed",this,t,n)},clearData:function(t){delete e.data[t],this.trigger("cleared",this,t)},getAllData:function(){var t={};return n.each(e.data,function(e,n){t[n]=e}),t},getRaw:function(){return e}},i.Events)}}(window.clique,window.Hashes,window._,window.Backbone),function(t,e,n){"use strict";t.Graph=e.Model.extend({constructor:function(t){e.Model.call(this,{},t||{})},initialize:function(e,n){t.util.require(n.adapter,"adapter"),this.adapter=n.adapter,this.nodes={},this.links=new t.util.Set,this.forward=new t.util.MultiTable,this.back=new t.util.MultiTable,this.set({nodes:[],links:[]})},addNeighborhood:function(t,e){return n.isUndefined(e)&&(e=1),this.adapter.neighborhood(t,e).then(n.bind(function(t){n.each(t.nodes,n.bind(function(e){this.addNode(e,t.links)},this))},this))},addNode:function(t,i){var o;n.has(this.nodes,t.key())||(o=n.isUndefined(i)?this.adapter.neighborLinks(t):e.$.when(i),o.then(n.bind(function(e){var i;this.nodes[t.key()]=t.getRaw(),e=n.filter(e,function(t){return n.has(this.nodes,t.source())&&n.has(this.nodes,t.target())},this),i=n.compact(n.map(e,function(t){var e=t.key();return this.links.has(e)?void 0:(this.links.add(e),this.forward.add(t.source(),t.target()),t.getAttribute("undirected")&&this.back.add(t.target(),t.source()),t.getRaw().source=this.nodes[t.source()],t.getRaw().target=this.nodes[t.target()],t.getRaw())},this)),this.set({nodes:this.get("nodes").concat([t.getRaw()]),links:this.get("links").concat(i)})},this)))},addNodes:function(e){var i=n.map(e,function(t){this.addNode(t)},this);return t.util.jqSequence(i)},removeNode:function(t){this.removeNeighborhood({center:t,radius:0})},removeNeighborhood:function(e){var i,o,s,r,u,c,d;e=e||{},i=e.center,o=e.radius,t.util.require(i,"center"),t.util.require(o,"radius"),r=new t.util.Set,r.add(i.key()),s=new t.util.Set,s.add(i.key()),n.each(n.range(o),n.bind(function(){var e=new t.util.Set;n.each(s.items(),n.bind(function(t){var i=this.forward.items(t)||[],o=this.back.items(t)||[];n.each(i.concat(o),function(t){e.add(t),r.add(t)})},this)),s=e},this)),u=new t.util.Set,n.each(r.items(),n.bind(function(t){u.add(t),delete this.nodes[t],n.each(this.forward[t],n.bind(function(e){this.back.remove(e,t)},this)),n.each(this.back[t],n.bind(function(e){this.forward.remove(e,t)},this)),this.forward.strike(t),this.back.strike(t)},this)),c=n.filter(this.get("nodes"),function(t){return!u.has(t.key)}),d=[],n.each(this.get("links"),n.bind(function(t){u.has(t.source.key)||u.has(t.target.key)?this.links.remove(t.key):d.push(t)},this)),this.set({nodes:c,links:d})},inNeighbors:function(t){return n.clone(this.back.items(t))},outNeighbors:function(t){return n.clone(this.forward.items(t))},neighbors:function(e){var i,o=this.inNeighbors(e),s=this.outNeighbors(e);return n.isUndefined(o)&&n.isUndefined(s)?void 0:(i=new t.util.Set,n.each((o||[]).concat(s||[]),i.add,i),i.items())},inDegree:function(t){var e=this.back.items(t);return e&&n.size(e)||-1},outDegree:function(t){var e=this.forward.items(t);return e&&n.size(e)||-1},degree:function(t){var e=this.inDegree(t),n=this.outDegree(t);return 0>e&&0>n?-1:(0>e?0:e)+(0>n?0:n)}})}(window.clique,window.Backbone,window._),function(t,e,n){"use strict";t.model.Selection=e.Model.extend({initialize:function(){this.focalPoint=0},add:function(t){this.set(t,t),this.size()&&this.trigger("focused",this.focused()),this.trigger("added",t)},remove:function(t){var e=this.focused()===t;this.unset(t),this.focalPoint>=this.size()?(this.focalPoint=Math.max(0,this.size()-1),this.trigger("focused",this.focused())):e&&this.focusLeft(),this.trigger("removed",t)},items:function(){return n.keys(this.attributes)},focusKey:function(t){var e=n.indexOf(this.items(),t);return-1===e?!1:(this.focus(e),!0)},focus:function(t){if(this.focalPoint=t,this.focalPoint<0)for(;this.focalPoint<0;)this.focalPoint+=this.size();else this.focalPoint>=this.size()&&(this.focalPoint=this.focalPoint%this.size());this.trigger("focused",this.focused())},focusLeft:function(){this.focus(this.focalPoint-1)},focusRight:function(){this.focus(this.focalPoint+1)},focused:function(){return this.items()[this.focalPoint]},size:function(){return n.size(this.attributes)}})}(window.clique,window.Backbone,window._),function(t,e,n,i,o){"use strict";var s;s=function(t){return this.selected.has(t.key)?"2px":"0px"},t.view.Cola=e.View.extend({initialize:function(e){var r,u,c;t.util.require(this.model,"model"),t.util.require(this.el,"el"),e=e||{},this.nodeEnter=n.bind(e.nodeEnter||function(t){var e;t.append("circle").classed("node",!0).attr("r",0).style("fill","limegreen").transition().duration(this.transitionTime).attr("r",n.bind(this.nodeRadius,this)),e=t.append("g"),e.append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",5).attr("ry",5).style("pointer-events","none").style("stroke-width","2px").style("stroke",n.bind(this.fill,this)).style("fill","lightgray"),e.append("text").text(this.label).datum(function(t){return t.textBBox=this.getBBox(),t}).attr("x",function(t){return-t.textBBox.width/2}).attr("y",function(t){return t.textBBox.height/4}).style("opacity",0).style("pointer-events","none").style("cursor","default")},this),this.nodeExit=n.bind(e.nodeExit||function(t){t.each(n.bind(function(t){this.selection.remove(t.key)},this)).transition().duration(this.transitionTime).attr("r",0).style("opacity",0).remove()},this),this.linkEnter=n.bind(e.linkEnter||function(t){var e;e=t.append("path").style("fill","lightslategray").style("opacity",0).style("stroke-width",1).style("stroke","lightslategray"),this.postLinkAdd(e),e.transition().duration(this.transitionTime).style("opacity",1),t.append("path").style("fill","none").classed("handle",!0).style("stroke-width",7).on("mouseenter",function(){i.select(this).classed("hovering",!0)}).on("mouseout",function(){i.select(this).classed("hovering",!1)}).on("click",n.bind(function(t){i.event.shiftKey?this.linkSelection.has(t.key)?this.linkSelection.remove(t.key):this.linkSelection.add(t.key):i.event.ctrlKey?(this.linkSelection.has(t.key)||this.linkSelection.add(t.key),this.linkSelection.focusKey(t.key)):(n.each(this.linkSelection.items(),function(t){this.linkSelection.remove(t)}),this.linkSelection.add(t.key))},this)),n.bind(function(){var t,e;t=function(t,e){var n,i,o=!1;return e>t?(n=t,i=e):(o=!0,n=e,i=t),{name:n+","+i,reverse:o}},this.count={},e=n.bind(function(e,i,o){var s,r=t(e,i),u=r.name;return s=o?"undirected":r.reverse?"back":"forward",n.has(this.count,u)||(this.count[u]={forward:0,back:0,undirected:0}),this.count[u][s]+=1,{name:u,tier:s,rank:this.count[u][s]-1}},this),this.links.datum(function(t){return t.linkRank=e(t.source.key,t.target.key,t.undirected),t})},this)()},this),this.linkExit=n.bind(e.linkExit||function(t){t.transition().duration(this.transitionTime).style("stroke-width",0).style("opacity",0).remove()},this),this.renderNodes=n.bind(e.renderNodes||function(t){var e=this;t.selectAll("circle.node").style("fill",n.bind(this.prefill,this)).style("stroke","blue").style("stroke-width",n.bind(s,this)).filter(function(t){return t.root}).transition().delay(2*this.transitionTime).each("interrupt",function(){i.select(this).style("fill",n.bind(e.fill,e))}).duration(2*this.transitionTime).style("fill",n.bind(this.fill,this)),t.selectAll("rect").style("fill",n.bind(function(t){return t.key===this.focused?"pink":"lightgray"},this)).style("stroke",n.bind(function(t){return this.selected.has(t.key)?"blue":n.bind(this.fill,this,t)()},this)),this.renderLabels()},this),this.onTick=n.bind(e.onTick||function(){var t=this;this.links.selectAll("path").attr("d",function(e){var n,o,s,r,u,c,d,h,a,l,f,g,k,y,m,p;return e.source.key===e.target.key?void i.select(this).remove():(p=e.data||{},m=function(t,e){return t+","+e},o=t.count[e.linkRank.name].undirected,s=Number(o%2===0),r=t.count[e.linkRank.name].forward,u=t.count[e.linkRank.name].back,"undirected"===e.linkRank.tier?n=e.linkRank.rank+s:"forward"===e.linkRank.tier?n=o+s+2*e.linkRank.rank:"back"===e.linkRank.tier&&(n=o+1+s+2*e.linkRank.rank),c=.15*(n%2===0?-n/2:(n+1)/2),f=n%2===0?-1:1,e.source.key<e.target.key&&(c=-1*c,f=-1*f),d=e.target.x-e.source.x,h=e.target.y-e.source.y,g={x:e.source.x+.5*d+c*h,y:e.source.y+.5*h+c*-d},a=1/Math.sqrt(d*d+h*h),l={x:f*h*a*5,y:f*-d*a*5},0===n?y=e.undirected?["M",m(e.source.x+.25*l.x,e.source.y+.25*l.y),"L",m(e.target.x+.25*l.x,e.target.y+.25*l.y),"L",m(e.target.x-.25*l.x,e.target.y-.25*l.y),"L",m(e.source.x-.25*l.x,e.source.y-.25*l.y)]:["M",m(e.source.x+.5*l.x,e.source.y+.5*l.y),"L",m(e.target.x,e.target.y),"L",m(e.source.x-.5*l.x,e.source.y-.5*l.y)]:e.undirected?(k={x:e.source.x+.5*d-c*h,y:e.source.y+.5*h-c*-d},y=["M",m(e.source.x+.5*l.x,e.source.y+.5*l.y),"Q",m(g.x,g.y),m(e.target.x+.5*l.x,e.target.y+.5*l.y),"L",m(e.target.x,e.target.y),"Q",m(g.x-.5*l.x,g.y-.5*l.y),m(e.source.x,e.source.y)]):y=["M",m(e.source.x+l.x,e.source.y+l.y),"Q",m(g.x,g.y),m(e.target.x,e.target.y),"Q",m(g.x,g.y),m(e.source.x,e.source.y)],y.join(" "))})},this),this.label=e.label||"",n.isFunction(this.label)||(this.label=n.constant(this.label)),this.mode="node",this.postLinkAdd=e.postLinkAdd||n.noop,this.baseNodeRadius=7.5,c=e.nodeRadius||function(t,e){return e},n.isFunction(c)||(c=n.constant(c)),this.nodeRadius=function(t){return c(t,this.baseNodeRadius)},this.transitionTime=e.transitionTime||500,this.focusColor=n.isUndefined(e.focusColor)?"pink":e.focusColor,this.rootColor=n.isUndefined(e.rootColor)?"gold":e.rootColor,u=e.fill||"blue",n.isFunction(u)||(u=n.constant(u)),this.fill=n.bind(function(t){var e;return this.model.adapter.getAccessor(t.key).clearAttribute("root"),t.key===this.focused&&(e=this.focusColor),e?e:u(t)},this),this.prefill=n.bind(function(t){var e;return t.key===this.focused?e=this.focusColor:t.root&&(e=this.rootColor),e?e:u(t)},this),this.cola=o.d3adaptor().linkDistance(e.linkDistance||100).size([this.$el.width(),this.$el.height()]).start(),this.selection=new t.model.Selection,this.linkSelection=new t.model.Selection,i.select(this.el).selectAll("*").remove(),r=i.select(this.el).append("g"),r.append("g").classed("links",!0),r.append("g").classed("nodes",!0),this.listenTo(this.model,"change",n.debounce(this.render,100)),this.listenTo(this.selection,"focused",function(t){this.focused=t,this.renderNodes(this.nodes)}),this.listenTo(this.linkSelection,"removed",function(t){i.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!1)}),this.listenTo(this.linkSelection,"added",function(t){i.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!0)}),this.listenTo(this.linkSelection,"focused",function(t){i.select(this.el).selectAll(".handle").classed("focused",!1).filter(function(e){return e.key===t}).classed("focused",!0)}),this.selected=new t.util.Set,this.listenTo(this.selection,"added",function(t){this.selected.add(t)}),this.listenTo(this.selection,"removed",function(t){this.selected.remove(t)})},showLabels:function(){var t=500,e=1.1;this.nodes.selectAll("circle.node").filter(this.label).transition().delay(function(t,e,n){return 10*n}).duration(t).attr("r",2),this.nodes.selectAll("rect").style("pointer-events",null).transition().delay(t).duration(t).attr("x",function(t){return-e*t.textBBox.width/2}).attr("y",function(t){return-e*t.textBBox.height/2}).attr("width",function(t){return e*t.textBBox.width}).attr("height",function(t){return e*t.textBBox.height}),this.nodes.selectAll("text").style("pointer-events",null).transition().delay(t+t/2).duration(t/2).style("opacity",1)},hideLabels:function(){var t,e=500;t=this.nodes.selectAll("g"),t.selectAll("rect").transition().delay(function(t,e,n){return 10*n}).duration(e).attr("x",0).attr("y",0).attr("width",0).attr("height",0),t.selectAll("text").style("pointer-events","none").transition().duration(e/2).style("opacity",0),this.nodes.selectAll("circle.node").transition().delay(e).duration(e).attr("r",n.bind(this.nodeRadius,this))},toggleLabels:function(){if("node"===this.mode)this.mode="label";else{if("label"!==this.mode)throw new Error("illegal state for mode: '"+this.mode+"'");this.mode="node"}this.renderLabels()},renderLabels:function(){"node"===this.mode?this.hideLabels():"label"===this.mode&&this.showLabels()},render:function(){var t,e,o=this.model.get("nodes"),s=this.model.get("links"),r=i.select(this.el),u=this;this.nodes=r.select("g.nodes").selectAll("g.node").data(o,n.property("key")),this.cola.nodes(o).links(s),this.nodes.datum(function(t){return t.fixed=!0,t}),this.links=r.select("g.links").selectAll("g.link").data(s,n.property("key")),t=this.links.enter().append("g").classed("link",!0),this.linkEnter(t),this.linkExit(this.links.exit()),t=this.nodes.enter().append("g").classed("node",!0),this.nodeEnter(t),e=this.cola.drag().on("drag",n.bind(function(){this.dragging=!0},this)),t.on("mousedown.signal",n.bind(function(){1===i.event.which&&(this.movingNode=!0)},this)).on("click",n.bind(function(t){1===i.event.which&&(this.dragging||(i.event.shiftKey?this.selected.has(t.key)?this.selection.remove(t.key):this.selection.add(t.key):i.event.ctrlKey?(this.selection.add(t.key),this.selection.focusKey(t.key)):(n.each(this.selection.items(),n.bind(function(t){this.selection.remove(t)},this)),this.selection.add(t.key)),this.nodes.interrupt(),this.renderNodes(this.nodes)),this.dragging=!1)},this)).on("mouseup.signal",n.bind(function(){1===i.event.which&&(this.movingNode=!1)},this)).call(e),this.renderNodes(this.nodes),this.nodeExit(this.nodes.exit()),this.cola.on("tick",n.bind(function(){this.nodes.attr("transform",function(t){return"translate("+t.x+" "+t.y+")"}),this.onTick()},this)),function(){var t,e,n=[1,0,0,1,0,0];t=function(t,e){n[4]+=t,n[5]+=e,r.select("g").attr("transform","matrix("+n.join(" ")+")")},e=function(t,e){n[0]*=t,n[3]*=t,n[4]*=t,n[5]*=t,n[4]+=(1-t)*e[0],n[5]+=(1-t)*e[1],r.select("g").attr("transform","matrix("+n.join(" ")+")")},function(){var e,n=!1;r.on("mousedown.pan",function(){3===i.event.which&&(n=!0)}),r.on("mousemove.pan",function(){n&&t(i.event.movementX,i.event.movementY)}),e=function(){n=!1},r.on("mouseup.pan",e),i.select(document).on("mouseup.pan",e)}(),r.on("wheel.zoom",function(){var t=1+Math.abs(i.event.deltaY)/200;i.event.deltaY>0&&(t=1/t),e(t,[i.event.pageX-u.$el.offset().left,i.event.pageY-u.$el.offset().top])}),i.select(document.body).on("wheel",function(){i.event.preventDefault(),i.event.stopPropagation()})}(),function(){var t,e,o,s,c=!1,d=!1,h={x:null,y:null},a={x:null,y:null},l=function(t,e,n){var i;return e>n&&(i=n,n=e,e=i),t>e&&n>t},f=function(t,e,n){return l(n.x,t.x,e.x)&&l(n.y,t.y,e.y)};r.on("mousedown.select",function(){1!==i.event.which||u.movingNode||(d=!0,c=!1,i.event.preventDefault(),i.selectAll(".panel-group").style("pointer-events","none"),i.event.shiftKey||(n.each(u.model.get("nodes"),n.bind(function(t){u.selection.remove(t.key)},this)),u.renderNodes(u.nodes),n.each(u.model.get("links"),n.bind(function(t){u.linkSelection.remove(t.key)},this))),t=u.$el.offset(),h.x=a.x=i.event.pageX-t.left,h.y=a.y=i.event.pageY-t.top)}),r.on("mousemove.select",function(){var n,o;d&&(c||(c=!0,d&&(e=r.append("rect").classed("selector",!0).attr("x",h.x).attr("y",h.y).attr("width",0).attr("height",0).style("opacity",.1).style("fill","black"))),a.x=n=i.event.pageX-t.left,a.y=o=i.event.pageY-t.top),d&&(n>h.x?e.attr("width",n-h.x):e.attr("width",h.x-n).attr("x",n),o>h.y?e.attr("height",o-h.y):e.attr("height",h.y-o).attr("y",o))}),o=function(t,e){var n=1/t[0],i={x:-t[4]*n,y:-t[5]*n};return{x:n*e.x+i.x,y:n*e.y+i.y}},s=function(){var t;d&&(c&&(r.selectAll(".selector").remove(),e=null),i.selectAll(".panel-group").style("pointer-events","auto"),t=(r.select("g").attr("transform")||"matrix(1 0 0 1 0 0)").slice("matrix(".length,-1).split(" ").map(Number),h=o(t,h),a=o(t,a),n.each(u.model.get("nodes"),function(t){l(t.x,h.x,a.x)&&l(t.y,h.y,a.y)&&u.selection.add(t.key)}),n.each(u.model.get("links"),function(t){n.any([f(h,a,t.source),f(h,a,t.target)])&&u.linkSelection.add(t.key)}),u.nodes.interrupt(),u.renderNodes(u.nodes)),c=!1,d=!1},r.on("mouseup.select",s),i.select(document).on("mouseup.select",s)}(),this.cola.start(),n.delay(n.bind(function(){this.nodes.datum(function(t){return t.fixed=!1,t}),this.trigger("render",this)},this),this.transitionTime+5)}})}(window.clique,window.Backbone,window._,window.d3,window.cola);