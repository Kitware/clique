!function(){"use strict";var t,e;t=window.clique,e=window.clique={},e.noConflict=function(){var i=e;return e=t,i},e.model={},e.view={}}(),function(t,e,i,n){"use strict";t.adapter={},t.Adapter=function(i){var s;this.accessors=s={},this.onNewAccessor=this.onNewAccessor||e.noop,this.addAccessor=function(i){var n;return e.has(s,i.key)||(s[i.key]=new t.util.Accessor(i),this.onNewAccessor(n)),n=s[i.key]},this.getAccessor=e.propertyOf(s),this.findNodes=function(t){return n.when(this.findNodesImpl(t)).then(e.partial(e.map,e,this.addAccessor,this))},this.findNode=function(t){return n.when(this.findNodesImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addAccessor(t[0])},this))},this.findNodeByKey=function(t){return this.findNode({key:t})},this.findLinks=function(i){var s=t.util.deepCopy(i),o=e.isUndefined(s.undirected)?!0:s.undirected,r=e.isUndefined(s.directed)?!0:s.directed,c=s.source,d=s.target;return delete s.undirected,delete s.directed,delete s.source,delete s.target,n.when(this.findLinksImpl(s,c,d,o,r)).then(e.partial(e.map,e,this.addAccessor,this))},this.findLink=function(t){return n.when(this.findLinksImpl(t)).then(e.bind(function(t){return e.isEmpty(t)?void 0:this.addAccessor(t[0])},this))},this.findLinkByKey=function(t){return this.findLink({key:t})},this.getNeighborLinks=function(t,i){var s=[];return i=i||{},e.each(["outgoing","incoming","undirected"],function(t){i[t]=e.isUndefined(i[t])?!0:i[t]}),i.outgoing&&s.push(this.findLinks({source:t.key(),undirected:!1})),i.incoming&&s.push(this.findLinks({target:t.key(),undirected:!1})),i.undirected&&(s.push(this.findLinks({source:t.key(),undirected:!0})),s.push(this.findLinks({target:t.key(),undirected:!0}))),n.when.apply(n,s).then(function(){return e.reduce(e.toArray(arguments),function(t,e){return t.concat(e)},[])})},this.getOutgoingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!1,undirected:!1})},this.getOutflowingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!1,undirected:!0})},this.getIncomingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!0,undirected:!1})},this.getInflowingLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!0,undirected:!0})},this.getUndirectedLinks=function(t){return this.getNeighborLinks(t,{outgoing:!1,incoming:!1,undirected:!0})},this.getDirectedLinks=function(t){return this.getNeighborLinks(t,{outgoing:!0,incoming:!0,undirected:!1})},this.getNeighbors=function(t,i){var s=t.key();return this.getNeighborLinks(t,i).then(e.bind(function(t){var i,o;return i=e.map(t,function(t){return s===t.source()?t.target():t.source()}),o=e.map(i,this.getAccessor,this),e.each(o,function(t,s){o[s]=e.isUndefined(t)?this.findNodeByKey(i[s]):n.when(o[s])},this),n.when.apply(n,o)},this)).then(function(){return e.toArray(arguments)})},this.getOutgoingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!1,undirected:!1})},this.getOutflowingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!1,undirected:!0})},this.getIncomingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!0,undirected:!1})},this.getInflowingNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!0,undirected:!0})},this.getUndirectedNeighbors=function(t){return this.getNeighbors(t,{outgoing:!1,incoming:!1,undirected:!0})},this.getDirectedNeighbors=function(t){return this.getNeighbors(t,{outgoing:!0,incoming:!0,undirected:!1})},this.createNode=function(t){return n.when(this.createNodeImpl(t||{})).then(e.bind(this.addAccessor,this))},this.createLink=function(t,i,s,o){var r;return t=e.result(t,"key",t),i=e.result(i,"key",i),r=s||{},o=e.isUndefined(o)?!1:o,n.when(this.createLinkImpl(t,i,r,o)).then(e.bind(this.addAccessor,this))},this.destroyNode=function(t){var e=t.key();return this.destroyNodeImpl(e).then(function(t){return{key:e,response:t}})},this.destroyLink=function(t){var e=t.key();return this.destroyLinkImpl(e).then(function(t){return{key:e,response:t}})},i=i||{},this.initialize.apply(this,arguments)},t.Adapter.extend=i.Model.extend,t.adapter.NodeLinkList=t.Adapter.extend({initialize:function(i){var n={};this.nodes=t.util.deepCopy(i.nodes),this.links=t.util.deepCopy(i.links),e.each(this.nodes,function(t,i){for(var s,o="datax";e.has(t,o);)o+="x";s=t[o]={},e.each(t,function(e,i){i!==o&&(s[i]=e,delete t[i])}),"data"!==o&&(t.data=s,delete t[o]),n[i]=t,t.key=e.uniqueId("node_")}),e.each(this.links,function(t){t.key=e.uniqueId("link_"),t.source=n[t.source],t.target=n[t.target]},this)},findNodesImpl:function(i){var n,s=t.util.deepCopy(i),o=this.nodes;return s.key&&(o=e.filter(o,function(t){return t.key===s.key}),delete s.key),n=e.filter(o,function(t){return e.isMatch(t.data,s)})},findLinksImpl:function(t,i,n,s,o){return e.filter(this.links,function(r){var c=(r.undirected||!1)===s,d=(e.isUndefined(r.undirected)||!r.undirected)===o,u=e.isUndefined(i)||r.source.key===i,a=e.isUndefined(n)||r.target.key===n,h=e.isMatch(t,r.data);return e.every([u,a,h,c,d])})},newNode:e.noop,newLink:e.noop,destroyNode:e.noop,destroyLink:e.noop})}(window.clique,window._,window.Backbone,window.jQuery),function(t,e,i,n){"use strict";t.util={},t.util.deepCopy=function(t){return i.isUndefined(t)?void 0:JSON.parse(JSON.stringify(t))},t.util.concat=function(){var t=i.toArray(arguments);return i.reduce(t,function(t,e){return t.concat(e)},[])},t.util.jqSequence=function(t){var e,s;return e=function(t,n,s){return s===i.size(t)?n:(n=n.then(function(){return t[s]}),e(t,n,s+1))},s=n.$.Deferred(),s.resolve(),e(t,s,0)},t.util.Set=function(){var t={};return{add:function(e){t[e]=null},remove:function(e){delete t[e]},has:function(e){return i.has(t,e)},items:function(e){var n=i.keys(t);return e&&(n=i.map(n,e)),n},size:function(){return i.size(t)}}},t.util.MultiTable=function(){var e={};return{add:function(n,s){i.has(e,n)||(e[n]=new t.util.Set),e[n].add(s)},remove:function(t,n){i.has(e,t)&&e[t].remove(n)},strike:function(t){delete e[t]},has:function(t,n){return i.has(e,t)&&(i.isUndefined(n)||e[t].has(n))},items:function(t){return i.has(e,t)?e[t].items():void 0}}},t.util.require=function(t,e){if(i.isUndefined(t))throw new Error("argument '"+e+"' is required")},t.util.Accessor=function(e){var s=new t.util.Set;return e.data=e.data||{},i.each(["key","source","target","data"],function(t){s.add(t)}),i.extend({key:function(){return e.key},source:function(){return e.source.key||e.source},target:function(){return e.target.key||e.target},getAttribute:function(t){return s.has(t)?void 0:e[t]},setAttribute:function(t,i){return s.has(t)?!1:(e[t]=i,!0)},clearAttribute:function(t){return s.has(t)?!1:(delete e[t],!0)},getAllAttributes:function(){var t={};return i.each(e,function(e,i){s.has(i)||(t[i]=e)}),t},getData:function(t){return e.data[t]},setData:function(t,i){e.data[t]=i,this.trigger("changed",this,t,i)},clearData:function(t){delete e.data[t],this.trigger("cleared",this,t)},getAllData:function(){var t={};return i.each(e.data,function(e,i){t[i]=e}),t},getRaw:function(){return e}},n.Events)}}(window.clique,window.Hashes,window._,window.Backbone),function(t,e,i){"use strict";t.Graph=e.Model.extend({constructor:function(t){e.Model.call(this,{},t||{})},initialize:function(e,i){t.util.require(i.adapter,"adapter"),this.adapter=i.adapter,this.nodes={},this.links=new t.util.Set,this.forward=new t.util.MultiTable,this.back=new t.util.MultiTable,this.set({nodes:[],links:[]})},addNeighborhood:function(n){var s,o,r,c,d=e.$;return t.util.require(n.center,"center"),t.util.require(n.radius,"radius"),s=n.center,o=n.radius,c=i.bind(function(e){return d.when.apply(d,i.map(e,function(t){return this.adapter.getNeighbors(t)},this)).then(function(){return t.util.concat.apply(this,i.toArray(arguments))}).then(i.bind(function(t){return this.addNodes(t).then(function(){return t})},this))},this),r=d.when([s]),this.addNode(s),i.times(o,function(){r=r.then(c)}),r},addNode:function(t){i.has(this.nodes,t.key())||this.adapter.getNeighborLinks(t).then(i.bind(function(e){var n;this.nodes[t.key()]=t.getRaw(),e=i.filter(e,function(t){return i.has(this.nodes,t.source())&&i.has(this.nodes,t.target())},this),n=i.compact(i.map(e,function(t){var e=t.key();return this.links.has(e)?void 0:(this.links.add(e),this.forward.add(t.source(),t.target()),t.getAttribute("undirected")&&this.back.add(t.target(),t.source()),t.getRaw().source=this.nodes[t.source()],t.getRaw().target=this.nodes[t.target()],t.getRaw())},this)),this.set({nodes:this.get("nodes").concat([t.getRaw()]),links:this.get("links").concat(n)})},this))},addNodes:function(e){var n=i.map(e,this.addNode,this);return t.util.jqSequence(n)},removeNode:function(t){this.removeNeighborhood({center:t,radius:0})},removeNeighborhood:function(e){var n,s,o,r,c,d,u;e=e||{},n=e.center,s=e.radius,t.util.require(n,"center"),t.util.require(s,"radius"),r=new t.util.Set,r.add(n.key()),o=new t.util.Set,o.add(n.key()),i.each(i.range(s),i.bind(function(){var e=new t.util.Set;i.each(o.items(),i.bind(function(t){var n=this.forward.items(t)||[],s=this.back.items(t)||[];i.each(n.concat(s),function(t){e.add(t),r.add(t)})},this)),o=e},this)),c=new t.util.Set,i.each(r.items(),i.bind(function(t){c.add(t),delete this.nodes[t],i.each(this.forward[t],i.bind(function(e){this.back.remove(e,t)},this)),i.each(this.back[t],i.bind(function(e){this.forward.remove(e,t)},this)),this.forward.strike(t),this.back.strike(t)},this)),d=i.filter(this.get("nodes"),function(t){return!c.has(t.key)}),u=[],i.each(this.get("links"),i.bind(function(t){c.has(t.source.key)||c.has(t.target.key)?this.links.remove(t.key):u.push(t)},this)),this.set({nodes:d,links:u})},inNeighbors:function(t){return i.clone(this.back.items(t))},outNeighbors:function(t){return i.clone(this.forward.items(t))},neighbors:function(e){var n,s=this.inNeighbors(e),o=this.outNeighbors(e);return i.isUndefined(s)&&i.isUndefined(o)?void 0:(n=new t.util.Set,i.each((s||[]).concat(o||[]),n.add,n),n.items())},inDegree:function(t){var e=this.back.items(t);return e&&i.size(e)||-1},outDegree:function(t){var e=this.forward.items(t);return e&&i.size(e)||-1},degree:function(t){var e=this.inDegree(t),i=this.outDegree(t);return 0>e&&0>i?-1:(0>e?0:e)+(0>i?0:i)}})}(window.clique,window.Backbone,window._),function(t,e,i){"use strict";t.model.Selection=e.Model.extend({initialize:function(){this.focalPoint=0},add:function(t){this.set(t,t),this.size()&&this.trigger("focused",this.focused()),this.trigger("added",t)},remove:function(t){var e=this.focused()===t;this.unset(t),this.focalPoint>=this.size()?(this.focalPoint=Math.max(0,this.size()-1),this.trigger("focused",this.focused())):e&&this.focusLeft(),this.trigger("removed",t)},items:function(){return i.keys(this.attributes)},focusKey:function(t){var e=i.indexOf(this.items(),t);return-1===e?!1:(this.focus(e),!0)},focus:function(t){if(this.focalPoint=t,this.focalPoint<0)for(;this.focalPoint<0;)this.focalPoint+=this.size();else this.focalPoint>=this.size()&&(this.focalPoint=this.focalPoint%this.size());this.trigger("focused",this.focused())},focusLeft:function(){this.focus(this.focalPoint-1)},focusRight:function(){this.focus(this.focalPoint+1)},focused:function(){return this.items()[this.focalPoint]},size:function(){return i.size(this.attributes)}})}(window.clique,window.Backbone,window._),function(t,e,i,n,s){"use strict";var o;o=function(t){return this.selected.has(t.key)?"2px":"0px"},t.view.Cola=e.View.extend({initialize:function(e){var r,c,d;t.util.require(this.model,"model"),t.util.require(this.el,"el"),e=e||{},this.nodeEnter=i.bind(e.nodeEnter||function(t){var e;t.append("circle").classed("node",!0).attr("r",0).style("fill","limegreen").transition().duration(this.transitionTime).attr("r",i.bind(this.nodeRadius,this)),e=t.append("g"),e.append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",5).attr("ry",5).style("pointer-events","none").style("stroke-width","2px").style("stroke",i.bind(this.fill,this)).style("fill","lightgray"),e.append("text").text(this.label).datum(function(t){return t.textBBox=this.getBBox(),t}).attr("x",function(t){return-t.textBBox.width/2}).attr("y",function(t){return t.textBBox.height/4}).style("opacity",0).style("pointer-events","none").style("cursor","default")},this),this.nodeExit=i.bind(e.nodeExit||function(t){t.each(i.bind(function(t){this.selection.remove(t.key)},this)).transition().duration(this.transitionTime).attr("r",0).style("opacity",0).remove()},this),this.linkEnter=i.bind(e.linkEnter||function(t){var e;e=t.append("path").style("fill","lightslategray").style("opacity",0).style("stroke-width",1).style("stroke","lightslategray"),this.postLinkAdd(e),e.transition().duration(this.transitionTime).style("opacity",1),t.append("path").style("fill","none").classed("handle",!0).style("stroke-width",7).on("mouseenter",function(){n.select(this).classed("hovering",!0)}).on("mouseout",function(){n.select(this).classed("hovering",!1)}).on("click",i.bind(function(t){n.event.shiftKey?this.linkSelection.has(t.key)?this.linkSelection.remove(t.key):this.linkSelection.add(t.key):n.event.ctrlKey?(this.linkSelection.has(t.key)||this.linkSelection.add(t.key),this.linkSelection.focusKey(t.key)):(i.each(this.linkSelection.items(),function(t){this.linkSelection.remove(t)}),this.linkSelection.add(t.key))},this)),i.bind(function(){var t,e;t=function(t,e){var i,n,s=!1;return e>t?(i=t,n=e):(s=!0,i=e,n=t),{name:i+","+n,reverse:s}},this.count={},e=i.bind(function(e,n,s){var o,r=t(e,n),c=r.name;return o=s?"undirected":r.reverse?"back":"forward",i.has(this.count,c)||(this.count[c]={forward:0,back:0,undirected:0}),this.count[c][o]+=1,{name:c,tier:o,rank:this.count[c][o]-1}},this),this.links.datum(function(t){return t.linkRank=e(t.source.key,t.target.key,t.undirected),t})},this)()},this),this.linkExit=i.bind(e.linkExit||function(t){t.transition().duration(this.transitionTime).style("stroke-width",0).style("opacity",0).remove()},this),this.renderNodes=i.bind(e.renderNodes||function(t){var e=this;t.selectAll("circle.node").style("fill",i.bind(this.prefill,this)).style("stroke","blue").style("stroke-width",i.bind(o,this)).filter(function(t){return t.root}).transition().delay(2*this.transitionTime).each("interrupt",function(){n.select(this).style("fill",i.bind(e.fill,e))}).duration(2*this.transitionTime).style("fill",i.bind(this.fill,this)),t.selectAll("rect").style("fill",i.bind(function(t){return t.key===this.focused?"pink":"lightgray"},this)).style("stroke",i.bind(function(t){return this.selected.has(t.key)?"blue":i.bind(this.fill,this,t)()},this)),this.renderLabels()},this),this.onTick=i.bind(e.onTick||function(){this.links.selectAll("path").attr("d",i.bind(function(t){var e,i,n,s,o,r,c,d,u,a,h,l,f,g,y,k;return k=t.data||{},y=function(t,e){return t+","+e},i=this.count[t.linkRank.name].undirected,n=Number(i%2===0),s=this.count[t.linkRank.name].forward,o=this.count[t.linkRank.name].back,"undirected"===t.linkRank.tier?e=t.linkRank.rank+n:"forward"===t.linkRank.tier?e=i+n+2*t.linkRank.rank:"back"===t.linkRank.tier&&(e=i+1+n+2*t.linkRank.rank),r=.15*(e%2===0?-e/2:(e+1)/2),h=e%2===0?-1:1,"forward"===t.linkRank.tier&&(r=-1*r,h=-1*h),c=t.target.x-t.source.x,d=t.target.y-t.source.y,l={x:t.source.x+.5*c+r*d,y:t.source.y+.5*d+r*-c},u=1/Math.sqrt(c*c+d*d),a={x:h*d*u*5,y:h*-c*u*5},0===e?g=t.undirected?["M",y(t.source.x+.25*a.x,t.source.y+.25*a.y),"L",y(t.target.x+.25*a.x,t.target.y+.25*a.y),"L",y(t.target.x-.25*a.x,t.target.y-.25*a.y),"L",y(t.source.x-.25*a.x,t.source.y-.25*a.y)]:["M",y(t.source.x+.5*a.x,t.source.y+.5*a.y),"L",y(t.target.x,t.target.y),"L",y(t.source.x-.5*a.x,t.source.y-.5*a.y)]:t.undirected?(f={x:t.source.x+.5*c-r*d,y:t.source.y+.5*d-r*-c},g=["M",y(t.source.x+.5*a.x,t.source.y+.5*a.y),"Q",y(l.x,l.y),y(t.target.x+.5*a.x,t.target.y+.5*a.y),"L",y(t.target.x,t.target.y),"Q",y(l.x-.5*a.x,l.y-.5*a.y),y(t.source.x,t.source.y)]):g=["M",y(t.source.x+a.x,t.source.y+a.y),"Q",y(l.x,l.y),y(t.target.x,t.target.y),"Q",y(l.x,l.y),y(t.source.x,t.source.y)],g.join(" ")},this))},this),this.label=e.label||"",i.isFunction(this.label)||(this.label=i.constant(this.label)),this.mode="node",this.postLinkAdd=e.postLinkAdd||i.noop,this.baseNodeRadius=7.5,d=e.nodeRadius||function(t,e){return e},i.isFunction(d)||(d=i.constant(d)),this.nodeRadius=function(t){return d(t,this.baseNodeRadius)},this.transitionTime=e.transitionTime||500,this.focusColor=i.isUndefined(e.focusColor)?"pink":e.focusColor,this.rootColor=i.isUndefined(e.rootColor)?"gold":e.rootColor,c=e.fill||"blue",i.isFunction(c)||(c=i.constant(c)),this.fill=i.bind(function(t){var e;return this.model.adapter.getAccessor(t.key).clearAttribute("root"),t.key===this.focused&&(e=this.focusColor),e?e:c(t)},this),this.prefill=i.bind(function(t){var e;return t.key===this.focused?e=this.focusColor:t.root&&(e=this.rootColor),e?e:c(t)},this),this.cola=s.d3adaptor().linkDistance(e.linkDistance||100).size([this.$el.width(),this.$el.height()]).start(),this.selection=new t.model.Selection,this.linkSelection=new t.model.Selection,n.select(this.el).selectAll("*").remove(),r=n.select(this.el).append("g"),r.append("g").classed("links",!0),r.append("g").classed("nodes",!0),this.listenTo(this.model,"change",i.debounce(this.render,100)),this.listenTo(this.selection,"focused",function(t){this.focused=t,this.renderNodes(this.nodes)}),this.listenTo(this.linkSelection,"removed",function(t){n.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!1)}),this.listenTo(this.linkSelection,"added",function(t){n.select(this.el).selectAll(".handle").filter(function(e){return e.key===t}).classed("selected",!0)}),this.listenTo(this.linkSelection,"focused",function(t){n.select(this.el).selectAll(".handle").classed("focused",!1).filter(function(e){return e.key===t}).classed("focused",!0)}),this.selected=new t.util.Set,this.listenTo(this.selection,"added",function(t){this.selected.add(t)}),this.listenTo(this.selection,"removed",function(t){this.selected.remove(t)})},showLabels:function(){var t=500;this.nodes.selectAll("circle.node").filter(this.label).transition().delay(function(t,e,i){return 10*i}).duration(t).attr("r",2),this.nodes.selectAll("rect").style("pointer-events",null).transition().delay(t).duration(t).attr("x",function(t){return-t.textBBox.width/2}).attr("y",function(t){return-t.textBBox.height/2}).attr("width",function(t){return t.textBBox.width}).attr("height",function(t){return t.textBBox.height}),this.nodes.selectAll("text").style("pointer-events",null).transition().delay(t+t/2).duration(t/2).style("opacity",1)},hideLabels:function(){var t,e=500;t=this.nodes.selectAll("g"),t.selectAll("rect").transition().delay(function(t,e,i){return 10*i}).duration(e).attr("x",0).attr("y",0).attr("width",0).attr("height",0),t.selectAll("text").style("pointer-events","none").transition().duration(e/2).style("opacity",0),this.nodes.selectAll("circle.node").transition().delay(e).duration(e).attr("r",i.bind(this.nodeRadius,this))},toggleLabels:function(){if("node"===this.mode)this.mode="label";else{if("label"!==this.mode)throw new Error("illegal state for mode: '"+this.mode+"'");this.mode="node"}this.renderLabels()},renderLabels:function(){"node"===this.mode?this.hideLabels():"label"===this.mode&&this.showLabels()},render:function(){var t,e,s=this.model.get("nodes"),o=this.model.get("links"),r=n.select(this.el),c=this;this.nodes=r.select("g.nodes").selectAll("g.node").data(s,i.property("key")),this.cola.nodes(s).links(o),this.nodes.datum(function(t){return t.fixed=!0,t}),this.links=r.select("g.links").selectAll("g.link").data(o,i.property("key")),t=this.links.enter().append("g").classed("link",!0),this.linkEnter(t),this.linkExit(this.links.exit()),t=this.nodes.enter().append("g").classed("node",!0),this.nodeEnter(t),e=this.cola.drag().on("drag",i.bind(function(){this.dragging=!0},this)),t.on("mousedown.signal",i.bind(function(){1===n.event.which&&(this.movingNode=!0)},this)).on("click",i.bind(function(t){1===n.event.which&&(this.dragging||(n.event.shiftKey?this.selected.has(t.key)?this.selection.remove(t.key):this.selection.add(t.key):n.event.ctrlKey?(this.selection.add(t.key),this.selection.focusKey(t.key)):(i.each(this.selection.items(),i.bind(function(t){this.selection.remove(t)},this)),this.selection.add(t.key)),this.nodes.interrupt(),this.renderNodes(this.nodes)),this.dragging=!1)},this)).on("mouseup.signal",i.bind(function(){1===n.event.which&&(this.movingNode=!1)},this)).call(e),this.renderNodes(this.nodes),this.nodeExit(this.nodes.exit()),this.cola.on("tick",i.bind(function(){this.nodes.attr("transform",function(t){return"translate("+t.x+" "+t.y+")"}),this.onTick()},this)),function(){var t,e,i=[1,0,0,1,0,0];t=function(t,e){i[4]+=t,i[5]+=e,r.select("g").attr("transform","matrix("+i.join(" ")+")")},e=function(t,e){i[0]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[4]+=(1-t)*e[0],i[5]+=(1-t)*e[1],r.select("g").attr("transform","matrix("+i.join(" ")+")")},function(){var e,i=!1;r.on("mousedown.pan",function(){3===n.event.which&&(i=!0)}),r.on("mousemove.pan",function(){i&&t(n.event.movementX,n.event.movementY)}),e=function(){i=!1},r.on("mouseup.pan",e),n.select(document).on("mouseup.pan",e)}(),r.on("wheel.zoom",function(){var t=1+Math.abs(n.event.deltaY)/200;n.event.deltaY>0&&(t=1/t),e(t,[n.event.pageX-c.$el.offset().left,n.event.pageY-c.$el.offset().top])}),n.select(document.body).on("wheel",function(){n.event.preventDefault(),n.event.stopPropagation()})}(),function(){var t,e,s,o,d=!1,u=!1,a={x:null,y:null},h={x:null,y:null},l=function(t,e,i){var n;return e>i&&(n=i,i=e,e=n),t>e&&i>t},f=function(t,e,i){return l(i.x,t.x,e.x)&&l(i.y,t.y,e.y)};r.on("mousedown.select",function(){1!==n.event.which||c.movingNode||(u=!0,d=!1,n.event.preventDefault(),n.selectAll(".panel-group").style("pointer-events","none"),n.event.shiftKey||(i.each(c.model.get("nodes"),i.bind(function(t){c.selection.remove(t.key)},this)),c.renderNodes(c.nodes),i.each(c.model.get("links"),i.bind(function(t){c.linkSelection.remove(t.key)},this))),t=c.$el.offset(),a.x=h.x=n.event.pageX-t.left,a.y=h.y=n.event.pageY-t.top)}),r.on("mousemove.select",function(){var i,s;u&&(d||(d=!0,u&&(e=r.append("rect").classed("selector",!0).attr("x",a.x).attr("y",a.y).attr("width",0).attr("height",0).style("opacity",.1).style("fill","black"))),h.x=i=n.event.pageX-t.left,h.y=s=n.event.pageY-t.top),u&&(i>a.x?e.attr("width",i-a.x):e.attr("width",a.x-i).attr("x",i),s>a.y?e.attr("height",s-a.y):e.attr("height",a.y-s).attr("y",s))}),s=function(t,e){var i=1/t[0],n={x:-t[4]*i,y:-t[5]*i};return{x:i*e.x+n.x,y:i*e.y+n.y}},o=function(){var t;u&&(d&&(r.selectAll(".selector").remove(),e=null),n.selectAll(".panel-group").style("pointer-events","auto"),t=(r.select("g").attr("transform")||"matrix(1 0 0 1 0 0)").slice("matrix(".length,-1).split(" ").map(Number),a=s(t,a),h=s(t,h),i.each(c.model.get("nodes"),function(t){l(t.x,a.x,h.x)&&l(t.y,a.y,h.y)&&c.selection.add(t.key)}),i.each(c.model.get("links"),function(t){i.any([f(a,h,t.source),f(a,h,t.target)])&&c.linkSelection.add(t.key)}),c.nodes.interrupt(),c.renderNodes(c.nodes)),d=!1,u=!1},r.on("mouseup.select",o),n.select(document).on("mouseup.select",o)}(),this.cola.start(),i.delay(i.bind(function(){this.nodes.datum(function(t){return t.fixed=!1,t}),this.trigger("render",this)},this),this.transitionTime+5)}})}(window.clique,window.Backbone,window._,window.d3,window.cola);