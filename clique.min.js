!function(){function e(e){var t,n,i,r="",o=-1;if(e&&e.length)for(i=e.length;(o+=1)<i;)t=e.charCodeAt(o),n=i>o+1?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),o+=1),127>=t?r+=String.fromCharCode(t):2047>=t?r+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function t(e){var t,n,i,r,o,s,a=[];if(t=n=i=r=o=0,e&&e.length)for(s=e.length,e+="";s>t;)i=e.charCodeAt(t),n+=1,128>i?(a[n]=String.fromCharCode(i),t+=1):i>191&&224>i?(r=e.charCodeAt(t+1),a[n]=String.fromCharCode((31&i)<<6|63&r),t+=2):(r=e.charCodeAt(t+1),o=e.charCodeAt(t+2),a[n]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),t+=3);return a.join("")}function n(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function i(e,t){return e<<t|e>>>32-t}function r(e,t){for(var n,i=t?"0123456789ABCDEF":"0123456789abcdef",r="",o=0,s=e.length;s>o;o+=1)n=e.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function o(e){var t,n=32*e.length,i="";for(t=0;n>t;t+=8)i+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return i}function s(e){var t,n=32*e.length,i="";for(t=0;n>t;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function a(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;r>t;t+=1)i[t]=0;for(t=0;n>t;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function u(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;r>t;t+=1)i[t]=0;for(t=0;n>t;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return i}function c(e,t){var n,i,r,o,s,a,u,c,h=t.length,l=Array();for(a=Array(Math.ceil(e.length/2)),o=a.length,n=0;o>n;n+=1)a[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;a.length>0;){for(s=Array(),r=0,n=0;n<a.length;n+=1)r=(r<<16)+a[n],i=Math.floor(r/h),r-=i*h,(s.length>0||i>0)&&(s[s.length]=i);l[l.length]=r,a=s}for(u="",n=l.length-1;n>=0;n--)u+=t.charAt(l[n]);for(c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=u.length;c>n;n+=1)u=t[0]+u;return u}function h(e,t){var n,i,r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",a=e.length;for(t=t||"=",n=0;a>n;n+=3)for(r=e.charCodeAt(n)<<16|(a>n+1?e.charCodeAt(n+1)<<8:0)|(a>n+2?e.charCodeAt(n+2):0),i=0;4>i;i+=1)s+=8*n+6*i>8*e.length?t:o.charAt(r>>>6*(3-i)&63);return s}var l;l={VERSION:"1.0.5",Base64:function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",r=!0;this.encode=function(t){var o,s,a,u="",c=t.length;for(i=i||"=",t=r?e(t):t,o=0;c>o;o+=3)for(a=t.charCodeAt(o)<<16|(c>o+1?t.charCodeAt(o+1)<<8:0)|(c>o+2?t.charCodeAt(o+2):0),s=0;4>s;s+=1)u+=8*o+6*s>8*c?i:n.charAt(a>>>6*(3-s)&63);return u},this.decode=function(e){var o,s,a,u,c,h,l,f,d,g,y="",w=[];if(!e)return e;o=g=0,e=e.replace(new RegExp("\\"+i,"gi"),"");do c=n.indexOf(e.charAt(o+=1)),h=n.indexOf(e.charAt(o+=1)),l=n.indexOf(e.charAt(o+=1)),f=n.indexOf(e.charAt(o+=1)),d=c<<18|h<<12|l<<6|f,s=d>>16&255,a=d>>8&255,u=255&d,g+=1,w[g]=64===l?String.fromCharCode(s):64===f?String.fromCharCode(s,a):String.fromCharCode(s,a,u);while(o<e.length);return y=w.join(""),y=r?t(y):y},this.setPad=function(e){return i=e||i,this},this.setTab=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},CRC32:function(t){var n,i,r,o=0,s=0,a=0;for(t=e(t),n=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o=-1^o,i=0,r=t.length;r>i;i+=1)a=255&(o^t.charCodeAt(i)),s="0x"+n.substr(9*a,8),o=o>>>8^s;return(-1^o)>>>0},MD5:function(t){function o(t){return t=D?e(t):t,s(l(a(t),8*t.length))}function u(t,n){var i,r,o,u,c;for(t=D?e(t):t,n=D?e(n):n,i=a(t),i.length>16&&(i=l(i,8*t.length)),r=Array(16),o=Array(16),c=0;16>c;c+=1)r[c]=909522486^i[c],o[c]=1549556828^i[c];return u=l(r.concat(a(n)),512+8*n.length),s(l(o.concat(u),640))}function l(e,t){var i,r,o,s,a,u=1732584193,c=-271733879,h=-1732584194,l=271733878;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,i=0;i<e.length;i+=16)r=u,o=c,s=h,a=l,u=d(u,c,h,l,e[i+0],7,-680876936),l=d(l,u,c,h,e[i+1],12,-389564586),h=d(h,l,u,c,e[i+2],17,606105819),c=d(c,h,l,u,e[i+3],22,-1044525330),u=d(u,c,h,l,e[i+4],7,-176418897),l=d(l,u,c,h,e[i+5],12,1200080426),h=d(h,l,u,c,e[i+6],17,-1473231341),c=d(c,h,l,u,e[i+7],22,-45705983),u=d(u,c,h,l,e[i+8],7,1770035416),l=d(l,u,c,h,e[i+9],12,-1958414417),h=d(h,l,u,c,e[i+10],17,-42063),c=d(c,h,l,u,e[i+11],22,-1990404162),u=d(u,c,h,l,e[i+12],7,1804603682),l=d(l,u,c,h,e[i+13],12,-40341101),h=d(h,l,u,c,e[i+14],17,-1502002290),c=d(c,h,l,u,e[i+15],22,1236535329),u=g(u,c,h,l,e[i+1],5,-165796510),l=g(l,u,c,h,e[i+6],9,-1069501632),h=g(h,l,u,c,e[i+11],14,643717713),c=g(c,h,l,u,e[i+0],20,-373897302),u=g(u,c,h,l,e[i+5],5,-701558691),l=g(l,u,c,h,e[i+10],9,38016083),h=g(h,l,u,c,e[i+15],14,-660478335),c=g(c,h,l,u,e[i+4],20,-405537848),u=g(u,c,h,l,e[i+9],5,568446438),l=g(l,u,c,h,e[i+14],9,-1019803690),h=g(h,l,u,c,e[i+3],14,-187363961),c=g(c,h,l,u,e[i+8],20,1163531501),u=g(u,c,h,l,e[i+13],5,-1444681467),l=g(l,u,c,h,e[i+2],9,-51403784),h=g(h,l,u,c,e[i+7],14,1735328473),c=g(c,h,l,u,e[i+12],20,-1926607734),u=y(u,c,h,l,e[i+5],4,-378558),l=y(l,u,c,h,e[i+8],11,-2022574463),h=y(h,l,u,c,e[i+11],16,1839030562),c=y(c,h,l,u,e[i+14],23,-35309556),u=y(u,c,h,l,e[i+1],4,-1530992060),l=y(l,u,c,h,e[i+4],11,1272893353),h=y(h,l,u,c,e[i+7],16,-155497632),c=y(c,h,l,u,e[i+10],23,-1094730640),u=y(u,c,h,l,e[i+13],4,681279174),l=y(l,u,c,h,e[i+0],11,-358537222),h=y(h,l,u,c,e[i+3],16,-722521979),c=y(c,h,l,u,e[i+6],23,76029189),u=y(u,c,h,l,e[i+9],4,-640364487),l=y(l,u,c,h,e[i+12],11,-421815835),h=y(h,l,u,c,e[i+15],16,530742520),c=y(c,h,l,u,e[i+2],23,-995338651),u=w(u,c,h,l,e[i+0],6,-198630844),l=w(l,u,c,h,e[i+7],10,1126891415),h=w(h,l,u,c,e[i+14],15,-1416354905),c=w(c,h,l,u,e[i+5],21,-57434055),u=w(u,c,h,l,e[i+12],6,1700485571),l=w(l,u,c,h,e[i+3],10,-1894986606),h=w(h,l,u,c,e[i+10],15,-1051523),c=w(c,h,l,u,e[i+1],21,-2054922799),u=w(u,c,h,l,e[i+8],6,1873313359),l=w(l,u,c,h,e[i+15],10,-30611744),h=w(h,l,u,c,e[i+6],15,-1560198380),c=w(c,h,l,u,e[i+13],21,1309151649),u=w(u,c,h,l,e[i+4],6,-145523070),l=w(l,u,c,h,e[i+11],10,-1120210379),h=w(h,l,u,c,e[i+2],15,718787259),c=w(c,h,l,u,e[i+9],21,-343485551),u=n(u,r),c=n(c,o),h=n(h,s),l=n(l,a);return Array(u,c,h,l)}function f(e,t,r,o,s,a){return n(i(n(n(t,e),n(o,a)),s),r)}function d(e,t,n,i,r,o,s){return f(t&n|~t&i,e,t,r,o,s)}function g(e,t,n,i,r,o,s){return f(t&i|n&~i,e,t,r,o,s)}function y(e,t,n,i,r,o,s){return f(t^n^i,e,t,r,o,s)}function w(e,t,n,i,r,o,s){return f(n^(t|~i),e,t,r,o,s)}var p=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,k=t&&"string"==typeof t.pad?t.pda:"=",D=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(o(e,D),p)},this.b64=function(e){return h(o(e),k)},this.any=function(e,t){return c(o(e,D),t)},this.raw=function(e){return o(e,D)},this.hex_hmac=function(e,t){return r(u(e,t),p)},this.b64_hmac=function(e,t){return h(u(e,t),k)},this.any_hmac=function(e,t,n){return c(u(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(p=e),this},this.setPad=function(e){return k=e||k,this},this.setUTF8=function(e){return"boolean"==typeof e&&(D=e),this}},SHA1:function(t){function s(t){return t=w?e(t):t,o(l(u(t),8*t.length))}function a(t,n){var i,r,s,a,c;for(t=w?e(t):t,n=w?e(n):n,i=u(t),i.length>16&&(i=l(i,8*t.length)),r=Array(16),s=Array(16),a=0;16>a;a+=1)r[a]=909522486^i[a],s[a]=1549556828^i[a];return c=l(r.concat(u(n)),512+8*n.length),o(l(s.concat(c),672))}function l(e,t){var r,o,s,a,u,c,h,l,g=Array(80),y=1732584193,w=-271733879,p=-1732584194,k=271733878,D=-1009589776;for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,r=0;r<e.length;r+=16){for(a=y,u=w,c=p,h=k,l=D,o=0;80>o;o+=1)g[o]=16>o?e[r+o]:i(g[o-3]^g[o-8]^g[o-14]^g[o-16],1),s=n(n(i(y,5),f(o,w,p,k)),n(n(D,g[o]),d(o))),D=k,k=p,p=i(w,30),w=y,y=s;y=n(y,a),w=n(w,u),p=n(p,c),k=n(k,h),D=n(D,l)}return Array(y,w,p,k,D)}function f(e,t,n,i){return 20>e?t&n|~t&i:40>e?t^n^i:60>e?t&n|t&i|n&i:t^n^i}function d(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}var g=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,y=t&&"string"==typeof t.pad?t.pda:"=",w=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(s(e,w),g)},this.b64=function(e){return h(s(e,w),y)},this.any=function(e,t){return c(s(e,w),t)},this.raw=function(e){return s(e,w)},this.hex_hmac=function(e,t){return r(a(e,t))},this.b64_hmac=function(e,t){return h(a(e,t),y)},this.any_hmac=function(e,t,n){return c(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(g=e),this},this.setPad=function(e){return y=e||y,this},this.setUTF8=function(e){return"boolean"==typeof e&&(w=e),this}},SHA256:function(t){function i(t,n){return t=n?e(t):t,o(k(u(t),8*t.length))}function s(t,n){t=A?e(t):t,n=A?e(n):n;var i,r=0,s=u(t),a=Array(16),c=Array(16);for(s.length>16&&(s=k(s,8*t.length));16>r;r+=1)a[r]=909522486^s[r],c[r]=1549556828^s[r];return i=k(a.concat(u(n)),512+8*n.length),o(k(c.concat(i),768))}function a(e,t){return e>>>t|e<<32-t}function l(e,t){return e>>>t}function f(e,t,n){return e&t^~e&n}function d(e,t,n){return e&t^e&n^t&n}function g(e){return a(e,2)^a(e,13)^a(e,22)}function y(e){return a(e,6)^a(e,11)^a(e,25)}function w(e){return a(e,7)^a(e,18)^l(e,3)}function p(e){return a(e,17)^a(e,19)^l(e,10)}function k(e,t){var i,r,o,s,a,u,c,h,l,k,C,B,A=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],v=new Array(64);for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,l=0;l<e.length;l+=16){for(i=A[0],r=A[1],o=A[2],s=A[3],a=A[4],u=A[5],c=A[6],h=A[7],k=0;64>k;k+=1)v[k]=16>k?e[k+l]:n(n(n(p(v[k-2]),v[k-7]),w(v[k-15])),v[k-16]),C=n(n(n(n(h,y(a)),f(a,u,c)),D[k]),v[k]),B=n(g(i),d(i,r,o)),h=c,c=u,u=a,a=n(s,C),s=o,o=r,r=i,i=n(C,B);A[0]=n(i,A[0]),A[1]=n(r,A[1]),A[2]=n(o,A[2]),A[3]=n(s,A[3]),A[4]=n(a,A[4]),A[5]=n(u,A[5]),A[6]=n(c,A[6]),A[7]=n(h,A[7])}return A}var D,C=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,B=t&&"string"==typeof t.pad?t.pda:"=",A=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(i(e,A))},this.b64=function(e){return h(i(e,A),B)},this.any=function(e,t){return c(i(e,A),t)},this.raw=function(e){return i(e,A)},this.hex_hmac=function(e,t){return r(s(e,t))},this.b64_hmac=function(e,t){return h(s(e,t),B)},this.any_hmac=function(e,t,n){return c(s(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(C=e),this},this.setPad=function(e){return B=e||B,this},this.setUTF8=function(e){return"boolean"==typeof e&&(A=e),this},D=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){function n(t){return t=B?e(t):t,o(s(u(t),8*t.length))}function i(t,n){t=B?e(t):t,n=B?e(n):n;var i,r=0,a=u(t),c=Array(32),h=Array(32);for(a.length>32&&(a=s(a,8*t.length));32>r;r+=1)c[r]=909522486^a[r],h[r]=1549556828^a[r];return i=s(c.concat(u(n)),1024+8*n.length),o(s(h.concat(i),1536))}function s(e,t){var n,i,r,o=new Array(80),s=new Array(16),u=[new a(1779033703,-205731576),new a(-1150833019,-2067093701),new a(1013904242,-23791573),new a(-1521486534,1595750129),new a(1359893119,-1377402159),new a(-1694144372,725511199),new a(528734635,-79577749),new a(1541459225,327033209)],c=new a(0,0),h=new a(0,0),D=new a(0,0),C=new a(0,0),B=new a(0,0),A=new a(0,0),v=new a(0,0),m=new a(0,0),b=new a(0,0),F=new a(0,0),E=new a(0,0),x=new a(0,0),S=new a(0,0),T=new a(0,0),N=new a(0,0),q=new a(0,0),O=new a(0,0);for(void 0===k&&(k=[new a(1116352408,-685199838),new a(1899447441,602891725),new a(-1245643825,-330482897),new a(-373957723,-2121671748),new a(961987163,-213338824),new a(1508970993,-1241133031),new a(-1841331548,-1357295717),new a(-1424204075,-630357736),new a(-670586216,-1560083902),new a(310598401,1164996542),new a(607225278,1323610764),new a(1426881987,-704662302),new a(1925078388,-226784913),new a(-2132889090,991336113),new a(-1680079193,633803317),new a(-1046744716,-815192428),new a(-459576895,-1628353838),new a(-272742522,944711139),new a(264347078,-1953704523),new a(604807628,2007800933),new a(770255983,1495990901),new a(1249150122,1856431235),new a(1555081692,-1119749164),new a(1996064986,-2096016459),new a(-1740746414,-295247957),new a(-1473132947,766784016),new a(-1341970488,-1728372417),new a(-1084653625,-1091629340),new a(-958395405,1034457026),new a(-710438585,-1828018395),new a(113926993,-536640913),new a(338241895,168717936),new a(666307205,1188179964),new a(773529912,1546045734),new a(1294757372,1522805485),new a(1396182291,-1651133473),new a(1695183700,-1951439906),new a(1986661051,1014477480),new a(-2117940946,1206759142),new a(-1838011259,344077627),new a(-1564481375,1290863460),new a(-1474664885,-1136513023),new a(-1035236496,-789014639),new a(-949202525,106217008),new a(-778901479,-688958952),new a(-694614492,1432725776),new a(-200395387,1467031594),new a(275423344,851169720),new a(430227734,-1194143544),new a(506948616,1363258195),new a(659060556,-544281703),new a(883997877,-509917016),new a(958139571,-976659869),new a(1322822218,-482243893),new a(1537002063,2003034995),new a(1747873779,-692930397),new a(1955562222,1575990012),new a(2024104815,1125592928),new a(-2067236844,-1578062990),new a(-1933114872,442776044),new a(-1866530822,593698344),new a(-1538233109,-561857047),new a(-1090935817,-1295615723),new a(-965641998,-479046869),new a(-903397682,-366583396),new a(-779700025,566280711),new a(-354779690,-840897762),new a(-176337025,-294727304),new a(116418474,1914138554),new a(174292421,-1563912026),new a(289380356,-1090974290),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,-1676669620),new a(1288033470,-885112138),new a(1501505948,-60457430),new a(1607167915,987167468),new a(1816402316,1246189591)]),i=0;80>i;i+=1)o[i]=new a(0,0);for(e[t>>5]|=128<<24-(31&t),e[(t+128>>10<<5)+31]=t,r=e.length,i=0;r>i;i+=32){for(l(D,u[0]),l(C,u[1]),l(B,u[2]),l(A,u[3]),l(v,u[4]),l(m,u[5]),l(b,u[6]),l(F,u[7]),n=0;16>n;n+=1)o[n].h=e[i+2*n],o[n].l=e[i+2*n+1];for(n=16;80>n;n+=1)f(N,o[n-2],19),d(q,o[n-2],29),g(O,o[n-2],6),x.l=N.l^q.l^O.l,x.h=N.h^q.h^O.h,f(N,o[n-15],1),f(q,o[n-15],8),g(O,o[n-15],7),E.l=N.l^q.l^O.l,E.h=N.h^q.h^O.h,w(o[n],x,o[n-7],E,o[n-16]);for(n=0;80>n;n+=1)S.l=v.l&m.l^~v.l&b.l,S.h=v.h&m.h^~v.h&b.h,f(N,v,14),f(q,v,18),d(O,v,9),x.l=N.l^q.l^O.l,x.h=N.h^q.h^O.h,f(N,D,28),d(q,D,2),d(O,D,7),E.l=N.l^q.l^O.l,E.h=N.h^q.h^O.h,T.l=D.l&C.l^D.l&B.l^C.l&B.l,T.h=D.h&C.h^D.h&B.h^C.h&B.h,p(c,F,x,S,k[n],o[n]),y(h,E,T),l(F,b),l(b,m),l(m,v),y(v,A,c),l(A,B),l(B,C),l(C,D),y(D,c,h);y(u[0],u[0],D),y(u[1],u[1],C),y(u[2],u[2],B),y(u[3],u[3],A),y(u[4],u[4],v),y(u[5],u[5],m),y(u[6],u[6],b),y(u[7],u[7],F)}for(i=0;8>i;i+=1)s[2*i]=u[i].h,s[2*i+1]=u[i].l;return s}function a(e,t){this.h=e,this.l=t}function l(e,t){e.h=t.h,e.l=t.l}function f(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function d(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function g(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function y(e,t,n){var i=(65535&t.l)+(65535&n.l),r=(t.l>>>16)+(n.l>>>16)+(i>>>16),o=(65535&t.h)+(65535&n.h)+(r>>>16),s=(t.h>>>16)+(n.h>>>16)+(o>>>16);e.l=65535&i|r<<16,e.h=65535&o|s<<16}function w(e,t,n,i,r){var o=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l),s=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o>>>16),a=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(s>>>16),u=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(a>>>16);e.l=65535&o|s<<16,e.h=65535&a|u<<16}function p(e,t,n,i,r,o){var s=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l)+(65535&o.l),a=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o.l>>>16)+(s>>>16),u=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(65535&o.h)+(a>>>16),c=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(o.h>>>16)+(u>>>16);e.l=65535&s|a<<16,e.h=65535&u|c<<16}var k,D=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,C=t&&"string"==typeof t.pad?t.pda:"=",B=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(n(e))},this.b64=function(e){return h(n(e),C)},this.any=function(e,t){return c(n(e),t)},this.raw=function(e){return n(e,B)},this.hex_hmac=function(e,t){return r(i(e,t))},this.b64_hmac=function(e,t){return h(i(e,t),C)},this.any_hmac=function(e,t,n){return c(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(D=e),this},this.setPad=function(e){return C=e||C,this},this.setUTF8=function(e){return"boolean"==typeof e&&(B=e),this}},RMD160:function(t){function o(t){return t=p?e(t):t,u(l(a(t),8*t.length))}function s(t,n){t=p?e(t):t,n=p?e(n):n;var i,r,o=a(t),s=Array(16),c=Array(16);for(o.length>16&&(o=l(o,8*t.length)),i=0;16>i;i+=1)s[i]=909522486^o[i],c[i]=1549556828^o[i];return r=l(s.concat(a(n)),512+8*n.length),u(l(c.concat(r),672))}function u(e){var t,n="",i=32*e.length;for(t=0;i>t;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e,t){var r,o,s,a,u,c,h,l,y,w,p,A,v,m,b=1732584193,F=4023233417,E=2562383102,x=271733878,S=3285377520;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,a=e.length,s=0;a>s;s+=16){for(u=w=b,c=p=F,h=A=E,l=v=x,y=m=S,o=0;79>=o;o+=1)r=n(u,f(o,c,h,l)),r=n(r,e[s+k[o]]),r=n(r,d(o)),r=n(i(r,C[o]),y),u=y,y=l,l=i(h,10),h=c,c=r,r=n(w,f(79-o,p,A,v)),r=n(r,e[s+D[o]]),r=n(r,g(o)),r=n(i(r,B[o]),m),w=m,m=v,v=i(A,10),A=p,p=r;r=n(F,n(h,v)),F=n(E,n(l,m)),E=n(x,n(y,w)),x=n(S,n(u,p)),S=n(b,n(c,A)),b=r}return[b,F,E,x,S]}function f(e,t,n,i){return e>=0&&15>=e?t^n^i:e>=16&&31>=e?t&n|~t&i:e>=32&&47>=e?(t|~n)^i:e>=48&&63>=e?t&i|n&~i:e>=64&&79>=e?t^(n|~i):"rmd160_f: j out of range"}function d(e){return e>=0&&15>=e?0:e>=16&&31>=e?1518500249:e>=32&&47>=e?1859775393:e>=48&&63>=e?2400959708:e>=64&&79>=e?2840853838:"rmd160_K1: j out of range"}function g(e){return e>=0&&15>=e?1352829926:e>=16&&31>=e?1548603684:e>=32&&47>=e?1836072691:e>=48&&63>=e?2053994217:e>=64&&79>=e?0:"rmd160_K2: j out of range"}var y=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,w=t&&"string"==typeof t.pad?t.pda:"=",p=t&&"boolean"==typeof t.utf8?t.utf8:!0,k=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],D=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],B=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(e){return r(o(e,p))},this.b64=function(e){return h(o(e,p),w)},this.any=function(e,t){return c(o(e,p),t)},this.raw=function(e){return o(e,p)},this.hex_hmac=function(e,t){return r(s(e,t))},this.b64_hmac=function(e,t){return h(s(e,t),w)},this.any_hmac=function(e,t,n){return c(s(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(y=e),this},this.setPad=function(e){return"undefined"!=typeof e&&(w=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(p=e),this}}},function(e,t){var n=!1;"object"==typeof exports&&(n=exports,exports&&"object"==typeof global&&global&&global===global.global&&(e=global)),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return l}):n?"object"==typeof module&&module&&module.exports===n?module.exports=l:n.Hashes=l:e.Hashes=l}(this)}(),function(){"use strict";var e,t;e=window.clique,t=window.clique={},t.noConflict=function(){var n=t;return t=e,n},t.model={},t.view={}}(),function(e,t,n){"use strict";e.adapter={},e.adapter.NodeLinkList=function(i){var r,o,s=e.util.deepCopy(i.nodes),a=e.util.deepCopy(i.links),u={},c={},h={},l={};return e.util.require(s,"nodes"),e.util.require(a,"links"),r=function(n){return t.has(u,n)?(t.has(l,n)||(l[n]=new e.util.Mutator(u[n])),l[n]):void 0},o=function(e){if(e.queryOp){if("=="!==e.queryOp)throw new Error("query operators besides == are not supported in this adapter");return"key"===e.field?function(t){return t.key===e.value}:function(t){return(t.data||{})[e.field]===e.value}}if(e.logicOp){if("and"===e.logicOp)return function(t){return o(e.left)(t)&&o(e.right)(t)};if("or"===e.logicOp)return function(t){return o(e.left)(t)||o(e.right)(t)};throw new Error("illegal logic operator '"+e.logicOp+"'")}throw new Error("query expression must have either a logicOp or queryOp field")},t.each(s,function(n){for(var i,r,o="data";t.has(n,o);)o+="x";r=n[o]={},t.each(n,function(e,t){t!==o&&(r[t]=e,delete n[t])}),"data"!==o&&(n.data=r,delete n[o]),i=e.util.md5(t.uniqueId()+JSON.stringify(n)),n.key=i,u[i]=n}),t.each(a,function(e){var t=s[e.source],n=s[e.target];c[t.key]=c[t.key]||{},c[t.key][n.key]=n.key,h[n.key]=h[n.key]||{},h[n.key][t.key]=t.key}),{findNodes:function(e){var i=new n.Deferred;return i.resolve(t.map(t.pluck(t.filter(s,o(e)),"key"),r)),i},findNode:function(e){var i=t.find(s,o(e)),a=new n.Deferred;return i&&(i=r(i.key)),a.resolve(i),a},neighborhood:function(i){var r,o=new e.util.Set,s=new e.util.Set,a=new n.Deferred;return e.util.require(i.center,"center"),e.util.require(i.radius,"radius"),i.center.setTransient("root",!0),r=new e.util.Set,(i.deleted||!i.center.getData("deleted"))&&(o.add(i.center.key()),r.add(i.center.key())),t.each(t.range(i.radius),function(){var n=new e.util.Set;t.each(r.items(),function(n){t.each(c[n],function(r){(i.deleted||!u[r].data.deleted)&&s.add(JSON.stringify({key:e.util.md5(JSON.stringify([n,r])+t.unique()),source:n,target:r}))}),t.each(h[n],function(r){(i.deleted||!u[r].data.deleted)&&s.add(JSON.stringify({key:e.util.md5(JSON.stringify([r,n])+t.unique()),source:r,target:n}))})}),t.each(s.items(),function(e){e=JSON.parse(e),o.has(e.source)||n.add(e.source),o.has(e.target)||n.add(e.target),o.add(e.source),o.add(e.target)}),r=n}),a.resolve({nodes:t.map(o.items(),t.propertyOf(u)),links:t.map(s.items(),JSON.parse)}),a},getMutator:r}}}(window.clique,window._,window.jQuery),function(e,t,n,i){"use strict";e.util={},e.util.md5=function(){var e=new t.MD5;return function(t){return e.hex(t)}}(),e.util.linkHash=function(e){var t,i;return t=e.source,n.isString(t)||(t=t.key),i=e.target,n.isString(i)||(i=i.key),JSON.stringify([t,i])},e.util.deepCopy=function(e){return n.isUndefined(e)?void 0:JSON.parse(JSON.stringify(e))},e.util.Set=function(){var e={};return{add:function(t){e[t]=null},remove:function(t){delete e[t]},has:function(t){return n.has(e,t)},items:function(t){var i=n.keys(e);return t&&(i=n.map(i,t)),i},size:function(){return n.size(e)}}},e.util.MultiTable=function(){var t={};return{add:function(i,r){n.has(t,i)||(t[i]=new e.util.Set),t[i].add(r)},remove:function(e,i){n.has(t,e)&&t[e].remove(i)},strike:function(e){delete t[e]},has:function(e,i){return n.has(t,e)&&(n.isUndefined(i)||t[e].has(i))},items:function(e){return n.has(t,e)?t[e].items():void 0}}},e.util.require=function(e,t){if(n.isUndefined(e))throw new Error("argument '"+t+"' is required")},e.util.Mutator=function(t){var r=new e.util.Set;return t.data=t.data||{},n.each(["key","source","target"],function(e){r.add(e)}),n.extend({key:function(){return t.key},source:function(){return t.source.key||t.source},target:function(){return t.target.key||t.target},getTransient:function(e){return r.has(e)?void 0:t[e]},setTransient:function(e,n){return r.has(e)?!1:(t[e]=n,!0)},clearTransient:function(e){return r.has(e)?!1:(delete t[e],!0)},getAllData:function(){return n.pairs(t.data)},getData:function(e){return t.data[e]},setData:function(e,n){t.data[e]=n,this.trigger("changed",this,e,n)},clearData:function(e){delete t.data[e],this.trigger("cleared",this,e)},getTarget:function(){return t}},i.Events)}}(window.clique,window.Hashes,window._,window.Backbone),function(e,t,n){"use strict";e.Graph=t.Model.extend({constructor:function(e){t.Model.call(this,{},e||{})},initialize:function(t,n){e.util.require(n.adapter,"adapter"),this.adapter=n.adapter,this.nodes={},this.links=new e.util.Set,this.forward=new e.util.MultiTable,this.back=new e.util.MultiTable,this.set({nodes:[],links:[]})},addNeighborhood:function(e){return this.adapter.neighborhood(e).then(n.bind(function(e){var t=[],i=[];n.each(e.nodes,n.bind(function(e){n.has(this.nodes,e.key)||(this.nodes[e.key]=e,t.push(e))},this)),n.each(e.links,n.bind(function(e){var t=e.key;this.links.has(t)||(this.links.add(t),this.forward.add(e.source,e.target),this.back.add(e.target,e.source),e.source=this.nodes[e.source],e.target=this.nodes[e.target],i.push(e))},this)),this.set({nodes:this.get("nodes").concat(t),links:this.get("links").concat(i)})},this))},addNode:function(e){var i,r;return console.log("addNode"),i=this.adapter.findLinks({source:e.key()}),r=this.adapter.findLinks({target:e.key()}),t.$.when(i,r).then(n.bind(function(t,i){var r;console.log("me",e.key()),console.log("from key",n.invoke(t,"key")),console.log("from source",n.invoke(t,"source")),console.log("from target",n.invoke(t,"target")),console.log("to key",n.invoke(i,"key")),console.log("to source",n.invoke(i,"source")),console.log("to target",n.invoke(i,"target")),t=n.filter(t,function(e){return n.has(this.nodes,e.target())},this),i=n.filter(i,function(e){return n.has(this.nodes,e.source())},this),console.log("from key",n.invoke(t,"key")),console.log("from source",n.invoke(t,"source")),console.log("from target",n.invoke(t,"target")),console.log("to key",n.invoke(i,"key")),console.log("to source",n.invoke(i,"source")),console.log("to target",n.invoke(i,"target")),n.has(this.nodes,e.key())||(this.nodes[e.key()]=e.getTarget()),r=n.compact(n.map(t.concat(i),n.bind(function(e){var t=e.key();return this.links.has(t)?void 0:(this.links.add(t),this.forward.add(e.source(),e.target()),this.back.add(e.target(),e.source()),e.getTarget().source=this.nodes[e.source()],e.getTarget().target=this.nodes[e.target()],console.log(e.getTarget()),e.getTarget())},this))),this.set({nodes:this.get("nodes").concat([e.getTarget()]),links:this.get("links").concat(r)})},this))},addNode2:function(e){return this.adapter.neighborhood({center:e,radius:1}).then(n.bind(function(t){var i=[];n.has(this.nodes,e.key())||(this.nodes[e.key()]=e.getTarget()),n.each(t.links,n.bind(function(e){var t=e.key;!this.links.has(t)&&n.has(this.nodes,e.source)&&n.has(this.nodes,e.target)&&(this.links.add(t),this.forward.add(e.source,e.target),this.back.add(e.target,e.source),e.source=this.nodes[e.source],e.target=this.nodes[e.target],i.push(e))},this)),this.set({nodes:this.get("nodes").concat([e.getTarget()]),links:this.get("links").concat(i)})},this))},removeNeighborhood:function(t){var i,r,o,s,a,u,c;t=t||{},i=t.center,r=t.radius,e.util.require(i,"center"),e.util.require(r,"radius"),s=new e.util.Set,s.add(i.key()),o=new e.util.Set,o.add(i.key()),n.each(n.range(r),n.bind(function(){var t=new e.util.Set;n.each(o.items(),n.bind(function(e){var i=this.forward.items(e)||[],r=this.back.items(e)||[];n.each(i.concat(r),function(e){t.add(e),s.add(e)})},this)),o=t},this)),a=new e.util.Set,n.each(s.items(),n.bind(function(e){a.add(e),delete this.nodes[e],n.each(this.forward[e],n.bind(function(t){this.back.remove(t,e)},this)),n.each(this.back[e],n.bind(function(t){this.forward.remove(t,e)},this)),this.forward.strike(e),this.back.strike(e)},this)),u=n.filter(this.get("nodes"),function(e){return!a.has(e.key)}),c=[],n.each(this.get("links"),n.bind(function(e){a.has(e.source.key)||a.has(e.target.key)?this.links.remove(e.key):c.push(e)},this)),this.set({nodes:u,links:c})},inNeighbors:function(e){return n.clone(this.back.items(e))},outNeighbors:function(e){return n.clone(this.forward.items(e))},neighbors:function(t){var i,r=this.inNeighbors(t),o=this.outNeighbors(t);return n.isUndefined(r)&&n.isUndefined(o)?void 0:(i=new e.util.Set,n.each((r||[]).concat(o||[]),i.add,i),i.items())},inDegree:function(e){var t=this.back.items(e);return t&&n.size(t)||-1},outDegree:function(e){var t=this.forward.items(e);return t&&n.size(t)||-1},degree:function(e){var t=this.inDegree(e),n=this.outDegree(e);return 0>t&&0>n?-1:(0>t?0:t)+(0>n?0:n)}})}(window.clique,window.Backbone,window._),function(e,t,n){"use strict";e.model.Selection=t.Model.extend({initialize:function(){this.focalPoint=0},add:function(e){this.set(e,e),this.size()&&this.trigger("focused",this.focused()),this.trigger("added",e)},remove:function(e){var t=this.focused()===e;this.unset(e),this.focalPoint>=this.size()?(this.focalPoint=Math.max(0,this.size()-1),this.trigger("focused",this.focused())):t&&this.focusLeft(),this.trigger("removed",e)},items:function(){return n.keys(this.attributes)},focusKey:function(e){
var t=n.indexOf(this.items(),e);return-1===t?!1:(this.focus(t),!0)},focus:function(e){if(this.focalPoint=e,this.focalPoint<0)for(;this.focalPoint<0;)this.focalPoint+=this.size();else this.focalPoint>=this.size()&&(this.focalPoint=this.focalPoint%this.size());this.trigger("focused",this.focused())},focusLeft:function(){this.focus(this.focalPoint-1)},focusRight:function(){this.focus(this.focalPoint+1)},focused:function(){return this.items()[this.focalPoint]},size:function(){return n.size(this.attributes)}})}(window.clique,window.Backbone,window._),function(e,t,n,i,r){"use strict";var o;o=function(e){return this.selected.has(e.key)?"2px":"0px"},e.view.Cola=t.View.extend({initialize:function(t){var o,s,a;e.util.require(this.model,"model"),e.util.require(this.el,"el"),t=t||{},this.postLinkAdd=t.postLinkAdd||n.noop,this.baseNodeRadius=7.5,a=t.nodeRadius||function(e,t){return t},n.isFunction(a)||(a=n.constant(a)),this.nodeRadius=function(e){return a(e,this.baseNodeRadius)},this.transitionTime=t.transitionTime||500,this.focusColor=n.isUndefined(t.focusColor)?"pink":t.focusColor,this.rootColor=n.isUndefined(t.rootColor)?"gold":t.rootColor,s=t.fill||"blue",n.isFunction(s)||(s=n.constant(s)),this.fill=n.bind(function(e){var t;return this.model.adapter.getMutator(e.key).clearTransient("root"),e.key===this.focused&&(t=this.focusColor),t?t:s(e)},this),this.prefill=n.bind(function(e){var t;return e.key===this.focused?t=this.focusColor:e.root&&(t=this.rootColor),t?t:s(e)},this),this.cola=r.d3adaptor().linkDistance(t.linkDistance||100).avoidOverlaps(!0).size([this.$el.width(),this.$el.height()]).start(),this.selection=new e.model.Selection,this.linkSelection=new e.model.Selection,i.select(this.el).selectAll("*").remove(),o=i.select(this.el).append("g"),o.append("g").classed("links",!0),o.append("g").classed("nodes",!0),this.listenTo(this.model,"change",n.debounce(this.render,100)),this.listenTo(this.selection,"focused",function(e){this.focused=e,this.renderNodes()}),this.listenTo(this.linkSelection,"removed",function(e){i.select(this.el).selectAll(".handle").filter(function(t){return t.key===e}).classed("selected",!1)}),this.listenTo(this.linkSelection,"added",function(e){i.select(this.el).selectAll(".handle").filter(function(t){return t.key===e}).classed("selected",!0)}),this.listenTo(this.linkSelection,"focused",function(e){i.select(this.el).selectAll(".handle").classed("focused",!1).filter(function(t){return t.key===e}).classed("focused",!0)}),this.selected=new e.util.Set,this.listenTo(this.selection,"added",function(e){this.selected.add(e)}),this.listenTo(this.selection,"removed",function(e){this.selected.remove(e)})},renderNodes:function(e){var t=this;e&&e.cancel&&this.nodes.interrupt(),this.nodes.style("fill",n.bind(this.prefill,this)).style("stroke","blue").style("stroke-width",n.bind(o,this)).filter(function(e){return e.root}).transition().delay(2*this.transitionTime).each("interrupt",function(){i.select(this).style("fill",n.bind(t.fill,t))}).duration(2*this.transitionTime).style("fill",n.bind(this.fill,this))},render:function(){var e,t,r,o=this.model.get("nodes"),s=this.model.get("links"),a=i.select(this.el),u=this;s=n.filter(this.model.get("links"),function(e){return!(e.data&&e.data.bidir&&n.has(e.data||{},"reference"))}),this.cola.nodes(o).links(s),this.nodes=a.select("g.nodes").selectAll("circle.node").data(o,n.property("key")),e=this.cola.drag().on("drag",n.bind(function(){this.dragging=!0},this)),this.nodes.datum(function(e){return e.fixed=!0,e}),this.links=a.select("g.links").selectAll("g.link").data(s,n.property("key")),t=this.links.enter().append("g").classed("link",!0),r=t.append("path").style("fill","lightslategray").style("opacity",0).style("stroke-width",1).style("stroke","lightslategray"),this.postLinkAdd(r),r.transition().duration(this.transitionTime).style("opacity",1),t.append("path").style("fill","none").classed("handle",!0).style("stroke-width",7).on("mouseenter",function(){i.select(this).classed("hovering",!0)}).on("mouseout",function(){i.select(this).classed("hovering",!1)}).on("click",function(e){i.event.shiftKey?u.linkSelection.has(e.key)?u.linkSelection.remove(e.key):u.linkSelection.add(e.key):i.event.ctrlKey?(u.linkSelection.has(e.key)||u.linkSelection.add(e.key),u.linkSelection.focusKey(e.key)):(n.each(u.linkSelection.items(),function(e){u.linkSelection.remove(e)}),u.linkSelection.add(e.key))}),function(){var e,t,i={};e=function(e,t){var n,i;return t>e?(n=e,i=t):(n=t,i=e),n+","+i},t=function(t,r){var o=e(t,r);return n.has(i,o)||(i[o]=0),i[o]+=1,i[o]-1},u.links.datum(function(e){return e.linkRank=t(e.source.key,e.target.key),e})}(),this.links.exit().transition().duration(this.transitionTime).style("stroke-width",0).style("opacity",0).remove(),this.nodes.enter().append("circle").classed("node",!0).attr("r",0).style("fill","limegreen").on("mousedown.signal",n.bind(function(){i.event.stopPropagation()},this)).on("click",function(e){u.dragging||(i.event.shiftKey?u.selected.has(e.key)?u.selection.remove(e.key):u.selection.add(e.key):i.event.ctrlKey?(u.selection.add(e.key),u.selection.focusKey(e.key)):(n.each(u.selection.items(),function(e){u.selection.remove(e)}),u.selection.add(e.key)),u.renderNodes({cancel:!0})),u.dragging=!1}).call(e).transition().duration(this.transitionTime).attr("r",n.bind(this.nodeRadius,this)),this.renderNodes(),this.nodes.exit().each(n.bind(function(e){this.selection.remove(e.key)},this)).transition().duration(this.transitionTime).attr("r",0).style("opacity",0).remove(),this.cola.on("tick",n.bind(function(){this.nodes.attr("cx",n.property("x")).attr("cy",n.property("y")),this.links.selectAll("path").attr("d",function(e){var t,n,i,r,o,s,a,u,c,h,l;return l=e.data||{},h=function(e,t){return e+","+t},t=.15*(e.linkRank%2===0?-e.linkRank/2:(e.linkRank+1)/2),s=e.linkRank%2===0?-1:1,n=e.target.x-e.source.x,i=e.target.y-e.source.y,a={x:e.source.x+.5*n+t*i,y:e.source.y+.5*i+t*-n},r=1/Math.sqrt(n*n+i*i),o={x:s*i*r*5,y:s*-n*r*5},0===e.linkRank?c=l.bidir?["M",h(e.source.x+.25*o.x,e.source.y+.25*o.y),"L",h(e.target.x+.25*o.x,e.target.y+.25*o.y),"L",h(e.target.x-.25*o.x,e.target.y-.25*o.y),"L",h(e.source.x-.25*o.x,e.source.y-.25*o.y)]:["M",h(e.source.x+.5*o.x,e.source.y+.5*o.y),"L",h(e.target.x,e.target.y),"L",h(e.source.x-.5*o.x,e.source.y-.5*o.y)]:l.bidir?(u={x:e.source.x+.5*n-t*i,y:e.source.y+.5*i-t*-n},c=["M",h(e.source.x+.5*o.x,e.source.y+.5*o.y),"Q",h(a.x,a.y),h(e.target.x+.5*o.x,e.target.y+.5*o.y),"L",h(e.target.x,e.target.y),"Q",h(a.x-.5*o.x,a.y-.5*o.y),h(e.source.x,e.source.y)]):c=["M",h(e.source.x+o.x,e.source.y+o.y),"Q",h(a.x,a.y),h(e.target.x,e.target.y),"Q",h(a.x,a.y),h(e.source.x,e.source.y)],c.join(" ")})},this)),function(){var e,t,n=[1,0,0,1,0,0];e=function(e,t){n[4]+=e,n[5]+=t,a.select("g").attr("transform","matrix("+n.join(" ")+")")},t=function(e,t){n[0]*=e,n[3]*=e,n[4]*=e,n[5]*=e,n[4]+=(1-e)*t[0],n[5]+=(1-e)*t[1],a.select("g").attr("transform","matrix("+n.join(" ")+")")},function(){var t,n=!1;a.on("mousedown.pan",function(){3===i.event.which&&(n=!0)}),a.on("mousemove.pan",function(){n&&e(i.event.movementX,i.event.movementY)}),t=function(){n=!1},a.on("mouseup.pan",t),i.select(document).on("mouseup.pan",t)}(),a.on("wheel.zoom",function(){var e=1+Math.abs(i.event.deltaY)/200;i.event.deltaY>0&&(e=1/e),t(e,[i.event.pageX-u.$el.offset().left,i.event.pageY-u.$el.offset().top])}),i.select(document.body).on("wheel",function(){i.event.preventDefault(),i.event.stopPropagation()})}(),function(){var e,t,r,o,s=!1,c=!1,h={x:null,y:null},l={x:null,y:null},f=function(e,t,n){var i;return t>n&&(i=n,n=t,t=i),e>t&&n>e},d=function(e,t,n){return f(n.x,e.x,t.x)&&f(n.y,e.y,t.y)};a.on("mousedown.select",function(){1===i.event.which&&(c=!0,s=!1,i.event.preventDefault(),i.selectAll(".panel-group").style("pointer-events","none"),i.event.shiftKey||(n.each(u.model.get("nodes"),function(e){u.selection.remove(e.key)}),u.renderNodes(),n.each(u.model.get("links"),function(e){u.linkSelection.remove(e.key)})),e=u.$el.offset(),h.x=l.x=i.event.pageX-e.left,h.y=l.y=i.event.pageY-e.top)}),a.on("mousemove.select",function(){var n,r;c&&(s||(s=!0,c&&(t=a.append("rect").classed("selector",!0).attr("x",h.x).attr("y",h.y).attr("width",0).attr("height",0).style("opacity",.1).style("fill","black"))),l.x=n=i.event.pageX-e.left,l.y=r=i.event.pageY-e.top),c&&(n>h.x?t.attr("width",n-h.x):t.attr("width",h.x-n).attr("x",n),r>h.y?t.attr("height",r-h.y):t.attr("height",h.y-r).attr("y",r))}),r=function(e,t){var n=1/e[0],i={x:-e[4]*n,y:-e[5]*n};return{x:n*t.x+i.x,y:n*t.y+i.y}},o=function(){var e;c&&(s&&(a.selectAll(".selector").remove(),t=null),i.selectAll(".panel-group").style("pointer-events","auto"),e=(a.select("g").attr("transform")||"matrix(1 0 0 1 0 0)").slice("matrix(".length,-1).split(" ").map(Number),h=r(e,h),l=r(e,l),n.each(u.model.get("nodes"),function(e){f(e.x,h.x,l.x)&&f(e.y,h.y,l.y)&&u.selection.add(e.key)}),n.each(u.model.get("links"),function(e){n.any([d(h,l,e.source),d(h,l,e.target)])&&u.linkSelection.add(e.key)}),u.renderNodes({cancel:!0})),s=!1,c=!1},a.on("mouseup.select",o),i.select(document).on("mouseup.select",o)}(),this.cola.start(),n.delay(n.bind(function(){this.nodes.datum(function(e){return e.fixed=!1,e})},this),this.transitionTime+5)}})}(window.clique,window.Backbone,window._,window.d3,window.cola);